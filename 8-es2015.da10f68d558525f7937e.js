(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{ctIF:function(t,e,c){"use strict";c.r(e),c.d(e,"BooksModule",(function(){return bt}));var o=c("bTqV"),n=c("qFsG"),a=c("SVse"),i=c("iInd"),l=c("bTu8"),r=c("8Y7J"),s=c("M9IT"),d=c("Dh3D"),u=c("+0xr"),g=c("0IaG"),b=c("3Pt+"),m=c("Jgta"),p=c("dNgK"),h=c("NFeN"),f=c("d3UM");const w=["fileInput"];function k(t,e){if(1&t){const t=Object(r.ec)();Object(r.dc)(0,"button",6),Object(r.lc)("click",(function(){return Object(r.Dc)(t),Object(r.pc)().uploadFiles()})),Object(r.Lc)(1),Object(r.cc)()}if(2&t){const t=Object(r.pc)();Object(r.uc)("type",t.uploadButtonType)("disabled",!t.selectedFiles),Object(r.Lb)("aria-label",t.uploadButtonText),Object(r.Kb)(1),Object(r.Nc)(" ",t.uploadButtonText," ")}}function C(t,e){1&t&&(Object(r.dc)(0,"mat-icon"),Object(r.Lc)(1,"close"),Object(r.cc)())}function O(t,e){if(1&t&&Object(r.Yb)(0,"mat-icon",10),2&t){const t=Object(r.pc)(2);Object(r.uc)("svgIcon",t.customSvgIcon)}}function y(t,e){if(1&t){const t=Object(r.ec)();Object(r.dc)(0,"button",7),Object(r.lc)("click",(function(){return Object(r.Dc)(t),Object(r.pc)().filesChanged(null)})),Object(r.Jc)(1,C,2,0,"mat-icon",8),Object(r.Jc)(2,O,1,1,"mat-icon",9),Object(r.cc)()}if(2&t){const t=Object(r.pc)();Object(r.Kb)(1),Object(r.uc)("ngIf",!t.customSvgIcon),Object(r.Kb)(1),Object(r.uc)("ngIf",t.customSvgIcon)}}let M=(()=>{class t{constructor(){this.labelText="Select File(s)",this.selectButtonText="Select File(s)",this.selectFilesButtonType="button",this.uploadButtonText="Upload File(s)",this.uploadButtonType="button",this.allowMultipleFiles=!1,this.showUploadButton=!0,this.acceptedTypes="*.*",this.customSvgIcon=null,this.uploadClicked=new r.p,this.selectedFilesChanged=new r.p,this.selectedFileText=""}filesChanged(t){if(this.selectedFiles=t,this.selectedFilesChanged.emit(this.selectedFiles),this.selectedFiles){const t=this.selectedFiles.length;this.selectedFileText=1===t?this.selectedFiles[0].name:t+" files selected"}else this.selectedFileText="",this.resetFileInput()}uploadFiles(){this.uploadClicked.emit(this.selectedFiles),this.resetFileInput()}resetFileInput(){this.fileInputRef.nativeElement.value=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Object(r.Rb)({type:t,selectors:[["mat-file-upload"]],viewQuery:function(t,e){if(1&t&&Object(r.Qc)(w,1),2&t){let t;Object(r.Ac)(t=Object(r.mc)())&&(e.fileInputRef=t.first)}},inputs:{labelText:"labelText",selectButtonText:"selectButtonText",selectFilesButtonType:"selectFilesButtonType",uploadButtonText:"uploadButtonText",uploadButtonType:"uploadButtonType",allowMultipleFiles:"allowMultipleFiles",showUploadButton:"showUploadButton",acceptedTypes:"acceptedTypes",customSvgIcon:"customSvgIcon"},outputs:{uploadClicked:"uploadClicked",selectedFilesChanged:"selectedFilesChanged"},decls:11,vars:9,consts:[[1,"file-input-text"],["mat-button","","color","primary",1,"file-input-button",3,"type","click"],["type","file",2,"display","none",3,"accept","multiple","change"],["fileInput",""],["mat-raised-button","","color","primary","class","file-input-button",3,"type","disabled","click",4,"ngIf"],["mat-icon-button","","type","button","aria-label","Remove Selected File(s)",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"file-input-button",3,"type","disabled","click"],["mat-icon-button","","type","button","aria-label","Remove Selected File(s)",3,"click"],[4,"ngIf"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(t,e){if(1&t){const t=Object(r.ec)();Object(r.dc)(0,"span",0),Object(r.Lc)(1),Object(r.cc)(),Object(r.dc)(2,"button",1),Object(r.lc)("click",(function(){return Object(r.Dc)(t),Object(r.Bc)(6).click()})),Object(r.dc)(3,"span"),Object(r.Lc)(4),Object(r.cc)(),Object(r.dc)(5,"input",2,3),Object(r.lc)("change",(function(t){return e.filesChanged(t.target.files)})),Object(r.cc)(),Object(r.cc)(),Object(r.Jc)(7,k,2,4,"button",4),Object(r.dc)(8,"span",0),Object(r.Lc)(9),Object(r.cc)(),Object(r.Jc)(10,y,3,2,"button",5)}2&t&&(Object(r.Kb)(1),Object(r.Mc)(e.labelText),Object(r.Kb)(1),Object(r.uc)("type",e.selectFilesButtonType),Object(r.Lb)("aria-label",e.selectButtonText),Object(r.Kb)(2),Object(r.Mc)(e.selectButtonText),Object(r.Kb)(1),Object(r.uc)("accept",e.acceptedTypes)("multiple",e.allowMultipleFiles),Object(r.Kb)(2),Object(r.uc)("ngIf",e.showUploadButton),Object(r.Kb)(2),Object(r.Mc)(e.selectedFileText),Object(r.Kb)(1),Object(r.uc)("ngIf",null!=e.selectedFiles&&e.selectedFiles.length>0))},directives:[o.b,a.k,h.a],styles:[".file-input-button[_ngcontent-%COMP%] { margin-right: 8px !important }",".file-input-text[_ngcontent-%COMP%] { font-size: 14px !important; margin-right: 8px !important }"]}),t})(),x=(()=>{class t{}return t.\u0275mod=Object(r.Vb)({type:t}),t.\u0275inj=Object(r.Ub)({factory:function(e){return new(e||t)},imports:[[a.c,o.c,h.b,n.b,f.b,b.i]]}),t})();var _=c("kmnG"),v=c("FKr1");function B(t,e){if(1&t&&r.Yb(0,"img",21),2&t){const t=r.pc();r.vc("src",t.data.img,r.Ec)}}function D(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," t\xedtulo "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function j(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," descripci\xf3n "),r.dc(2,"strong"),r.Lc(3,"invalida"),r.cc(),r.cc())}function I(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," url de compra "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function F(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," monto "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}const L=function(t){return{"background-color":t}};let P=(()=>{class t{constructor(t,e,c,o){this.cd=t,this._snackBar=e,this.dialogRef=c,this.data=o,this.imgUrl="",this.storage=m.a.storage(),this.storageRef=m.a.storage().ref("books/"),this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.updateArticleForm=new b.g({title:new b.d("",[b.w.required]),description:new b.d("",[b.w.required]),buy_url:new b.d("",[b.w.required]),color:new b.d("",[b.w.required]),img:new b.d("",[b.w.required])})}ngAfterViewInit(){}updateBook(){this.dialogRef.close()}onSelectedFilesChanged(t,e){var c=t[0],o=c.slice(0,c.size,"image/png");this.newFile=new File([o],e.id+".png",{type:"image/png"})}onUploadClicked(){this.storageRef.child(this.newFile.name).put(this.newFile).then(t=>{this.storageRef.child(this.newFile.name).getDownloadURL().then(t=>{this.data.img=t,this.cd.detectChanges()}),this._snackBar.open("Imagen subida correctamente","Ok",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:this.snackBarHorizontalPosition,verticalPosition:this.snackBarHerticalPosition})})}getImgUrl(){let t;return this.booksRef.getDownloadURL().then((function(e){console.log(e),t=e})).catch((function(e){console.log(e),t=e})),t}}return t.\u0275fac=function(e){return new(e||t)(r.Xb(r.h),r.Xb(p.b),r.Xb(g.g),r.Xb(g.a))},t.\u0275cmp=r.Rb({type:t,selectors:[["article-editdialog"]],decls:43,vars:22,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"text-align","center"],[1,"mb-3",2,"padding-bottom","10px",3,"ngStyle"],["alt","foto libro","height","200","style","max-width: 250px;",3,"src",4,"ngIf"],[3,"labelText","selectButtonText","uploadButtonText","allowMultipleFiles","acceptedTypes","selectedFilesChanged","uploadClicked"],[1,"update-book-form"],["updateBookForm","ngForm"],[1,"form-field"],["matInput","","name","title","required","",3,"ngModel","ngModelChange"],["title","ngModel"],[4,"ngIf"],["rows","3","matInput","","name","description","required","",3,"ngModel","ngModelChange"],["description","ngModel"],["rows","3","matInput","","name","buy_url","required","",3,"ngModel","ngModelChange"],["buy_url","ngModel"],["name","color","required","","value","data.color",3,"ngModel","ngStyle","ngModelChange"],["color","ngModel"],["value","green",2,"background-color","#DCECDD"],["value","blue",2,"background-color","#D4D7E4"],["mat-dialog-actions",""],["mat-raised-button","","cdkFocusInitial","",3,"mat-dialog-close","disabled"],["alt","foto libro","height","200",2,"max-width","250px",3,"src"]],template:function(t,e){if(1&t&&(r.dc(0,"h1",0),r.Lc(1,"Editar Libro"),r.cc(),r.dc(2,"div",1),r.dc(3,"div",2),r.Jc(4,B,1,1,"img",3),r.Yb(5,"br"),r.dc(6,"mat-file-upload",4),r.lc("selectedFilesChanged",(function(t){return e.onSelectedFilesChanged(t,e.data)}))("uploadClicked",(function(){return e.onUploadClicked()})),r.cc(),r.cc(),r.dc(7,"form",5,6),r.dc(9,"mat-form-field",7),r.dc(10,"mat-label"),r.Lc(11,"T\xedtulo:"),r.cc(),r.dc(12,"input",8,9),r.lc("ngModelChange",(function(t){return e.data.title=t})),r.cc(),r.Jc(14,D,4,0,"mat-error",10),r.cc(),r.Yb(15,"br"),r.dc(16,"mat-form-field",7),r.dc(17,"mat-label"),r.Lc(18,"Descripci\xf3n:"),r.cc(),r.dc(19,"textarea",11,12),r.lc("ngModelChange",(function(t){return e.data.description=t})),r.cc(),r.Jc(21,j,4,0,"mat-error",10),r.cc(),r.Yb(22,"br"),r.dc(23,"mat-form-field",7),r.dc(24,"mat-label"),r.Lc(25,"Url de compra:"),r.cc(),r.dc(26,"textarea",13,14),r.lc("ngModelChange",(function(t){return e.data.buy_url=t})),r.cc(),r.Jc(28,I,4,0,"mat-error",10),r.cc(),r.Yb(29,"br"),r.dc(30,"mat-form-field",7),r.dc(31,"mat-label"),r.Lc(32,"Color de fondo:"),r.cc(),r.dc(33,"mat-select",15,16),r.lc("ngModelChange",(function(t){return e.data.color=t})),r.dc(35,"mat-option",17),r.Lc(36,"Verde "),r.cc(),r.dc(37,"mat-option",18),r.Lc(38,"Azul"),r.cc(),r.cc(),r.Jc(39,F,4,0,"mat-error",10),r.cc(),r.cc(),r.cc(),r.dc(40,"div",19),r.dc(41,"button",20),r.Lc(42,"Guardar"),r.cc(),r.cc()),2&t){const t=r.Bc(8),c=r.Bc(13),o=r.Bc(20),n=r.Bc(27),a=r.Bc(34);r.Kb(3),r.uc("ngStyle",r.yc(18,L,"green"===e.data.color?"#DCECDD":"#D4D7E4")),r.Kb(1),r.uc("ngIf",e.data.img),r.Kb(2),r.uc("labelText","Selecciona una foto para subir (.png).")("selectButtonText","Elegir archivos")("uploadButtonText","Cambiar")("allowMultipleFiles",!1)("acceptedTypes",".png"),r.Kb(6),r.uc("ngModel",e.data.title),r.Kb(2),r.uc("ngIf",!c.valid&&c.touched),r.Kb(5),r.uc("ngModel",e.data.description),r.Kb(2),r.uc("ngIf",!o.valid&&o.touched),r.Kb(5),r.uc("ngModel",e.data.buy_url),r.Kb(2),r.uc("ngIf",!n.valid&&n.touched),r.Kb(5),r.uc("ngModel",e.data.color)("ngStyle",r.yc(20,L,"green"===e.data.color?"#DCECDD":"#D4D7E4")),r.Kb(6),r.uc("ngIf",!a.valid&&a.touched),r.Kb(2),r.uc("mat-dialog-close",e.data)("disabled",t.invalid)}},directives:[g.h,g.e,a.l,a.k,M,b.y,b.p,b.q,_.c,_.g,n.a,b.b,b.u,b.o,b.r,f.a,v.k,g.c,o.b,g.d,_.b],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}.update-book-form[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{width:100%}.form-field[_ngcontent-%COMP%]{width:90%}"],changeDetection:0}),t})(),S=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}onNoClick(){this.dialogRef.close()}toFloat(t){return parseFloat(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Xb(g.g),r.Xb(g.a))},t.\u0275cmp=r.Rb({type:t,selectors:[["article-deletedialog"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"width","80%"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",1,"delete-button",3,"mat-dialog-close"],["mat-button","",1,"no-delete-button",3,"click"]],template:function(t,e){1&t&&(r.dc(0,"h1",0),r.Lc(1,"Desea eliminar libro?"),r.cc(),r.Yb(2,"div",1),r.dc(3,"div",2),r.dc(4,"button",3),r.Lc(5,"Si, eliminar"),r.cc(),r.dc(6,"button",4),r.lc("click",(function(){return e.onNoClick()})),r.Lc(7,"No"),r.cc(),r.cc()),2&t&&(r.Kb(4),r.uc("mat-dialog-close",e.data))},directives:[g.h,g.e,g.c,o.b,g.d],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}input[_ngcontent-%COMP%]{width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#c00000;color:#fff}.delete-button[_ngcontent-%COMP%]{background-color:#138535;color:#fff}"]}),t})();function T(t,e){if(1&t&&r.Yb(0,"img",23),2&t){const t=r.pc();r.vc("src",t.data.newBook.img,r.Ec)}}function K(t,e){1&t&&(r.dc(0,"span",24),r.Lc(1,"El archivo debe ser formato .png"),r.cc())}function E(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," t\xedtulo "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function R(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," descripci\xf3n "),r.dc(2,"strong"),r.Lc(3,"invalida"),r.cc(),r.cc())}function J(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," url de compra "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function U(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," monto "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}const Y=function(t){return{"background-color":t}},q=function(t){return{color:t}};let z=(()=>{class t{constructor(t,e,c,o){this.cd=t,this._snackBar=e,this.dialogRef=c,this.data=o,this.storage=m.a.storage(),this.storageRef=m.a.storage().ref("books/"),this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.fileAccept=!0,this.updateArticleForm=new b.g({price:new b.d("",[b.w.required]),description:new b.d("",[b.w.required]),jelpi_amount:new b.d("",[b.w.required,b.w.pattern("[[0-9]*.?[0-9]{0,2}")]),company_amount:new b.d("",[b.w.required,b.w.pattern("[0-9]*.?[0-9]{0,2}")])})}updateArticles(){this.dialogRef.close()}onNoClick(){this.dialogRef.close()}onSelectedFilesChanged(t,e){var c=t[0];"image/png"==c.type?(this.fileAccept=!0,this.blob=c.slice(0,c.size,"image/png")):(this.fileAccept=!1,console.log("type error"))}onUploadClicked(){this.data.newImg=new File([this.blob],"blob.png",{type:"image/png"}),console.log(this.data.newImg)}}return t.\u0275fac=function(e){return new(e||t)(r.Xb(r.h),r.Xb(p.b),r.Xb(g.g),r.Xb(g.a))},t.\u0275cmp=r.Rb({type:t,selectors:[["article-newdialog"]],decls:47,vars:27,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"text-align","center"],[1,"mb-3",2,"padding-bottom","10px",3,"ngStyle"],["alt","foto libro","height","200","style","max-width: 250px;",3,"src",4,"ngIf"],[3,"ngStyle","labelText","selectButtonText","uploadButtonText","allowMultipleFiles","acceptedTypes","showUploadButton","selectedFilesChanged","uploadClicked"],["style","color:red;",4,"ngIf"],[1,"new-book-form"],["newBookForm","ngForm"],[1,"form-field"],["matInput","","name","title","required","",3,"ngModel","ngModelChange"],["title","ngModel"],[4,"ngIf"],["rows","3","matInput","","name","description","required","",3,"ngModel","ngModelChange"],["description","ngModel"],["rows","3","matInput","","name","buy_url","required","",3,"ngModel","ngModelChange"],["buy_url","ngModel"],["name","color","required","","value","data.color",3,"ngModel","ngStyle","ngModelChange"],["color","ngModel"],["value","green",2,"background-color","#DCECDD"],["value","blue",2,"background-color","#D4D7E4"],["mat-dialog-actions",""],["mat-raised-button","",1,"save-button",3,"mat-dialog-close","disabled"],["mat-raised-button","",1,"no-delete-button",3,"click"],["alt","foto libro","height","200",2,"max-width","250px",3,"src"],[2,"color","red"]],template:function(t,e){if(1&t&&(r.dc(0,"h1",0),r.Lc(1,"Nuevo Libro"),r.cc(),r.dc(2,"div",1),r.dc(3,"div",2),r.Jc(4,T,1,1,"img",3),r.Yb(5,"br"),r.dc(6,"mat-file-upload",4),r.lc("selectedFilesChanged",(function(t){return e.onSelectedFilesChanged(t,e.data)}))("uploadClicked",(function(){return e.onUploadClicked()})),r.cc(),r.Yb(7,"br"),r.Jc(8,K,2,0,"span",5),r.cc(),r.dc(9,"form",6,7),r.dc(11,"mat-form-field",8),r.dc(12,"mat-label"),r.Lc(13,"T\xedtulo:"),r.cc(),r.dc(14,"input",9,10),r.lc("ngModelChange",(function(t){return e.data.newBook.title=t})),r.cc(),r.Jc(16,E,4,0,"mat-error",11),r.cc(),r.Yb(17,"br"),r.dc(18,"mat-form-field",8),r.dc(19,"mat-label"),r.Lc(20,"Descripci\xf3n:"),r.cc(),r.dc(21,"textarea",12,13),r.lc("ngModelChange",(function(t){return e.data.newBook.description=t})),r.cc(),r.Jc(23,R,4,0,"mat-error",11),r.cc(),r.Yb(24,"br"),r.dc(25,"mat-form-field",8),r.dc(26,"mat-label"),r.Lc(27,"Url de compra:"),r.cc(),r.dc(28,"textarea",14,15),r.lc("ngModelChange",(function(t){return e.data.newBook.buy_url=t})),r.cc(),r.Jc(30,J,4,0,"mat-error",11),r.cc(),r.Yb(31,"br"),r.dc(32,"mat-form-field",8),r.dc(33,"mat-label"),r.Lc(34,"Color de fondo:"),r.cc(),r.dc(35,"mat-select",16,17),r.lc("ngModelChange",(function(t){return e.data.newBook.color=t})),r.dc(37,"mat-option",18),r.Lc(38,"Verde "),r.cc(),r.dc(39,"mat-option",19),r.Lc(40,"Azul"),r.cc(),r.cc(),r.Jc(41,U,4,0,"mat-error",11),r.cc(),r.cc(),r.cc(),r.dc(42,"div",20),r.dc(43,"button",21),r.Lc(44,"Guardar"),r.cc(),r.dc(45,"button",22),r.lc("click",(function(){return e.onNoClick()})),r.Lc(46,"Volver"),r.cc(),r.cc()),2&t){const t=r.Bc(10),c=r.Bc(15),o=r.Bc(22),n=r.Bc(29),a=r.Bc(36);r.Kb(3),r.uc("ngStyle",r.yc(21,Y,"green"===e.data.newBook.color?"#DCECDD":"#D4D7E4")),r.Kb(1),r.uc("ngIf",e.data.img),r.Kb(2),r.uc("ngStyle",r.yc(23,q,e.fileAccept?"":"red"))("labelText","Selecciona una foto para subir (.png).")("selectButtonText","Elegir archivos")("uploadButtonText","Elegir")("allowMultipleFiles",!1)("acceptedTypes",".png")("showUploadButton",e.fileAccept),r.Kb(2),r.uc("ngIf",!e.fileAccept),r.Kb(6),r.uc("ngModel",e.data.newBook.title),r.Kb(2),r.uc("ngIf",!c.valid&&c.touched),r.Kb(5),r.uc("ngModel",e.data.newBook.description),r.Kb(2),r.uc("ngIf",!o.valid&&o.touched),r.Kb(5),r.uc("ngModel",e.data.newBook.buy_url),r.Kb(2),r.uc("ngIf",!n.valid&&n.touched),r.Kb(5),r.uc("ngModel",e.data.newBook.color)("ngStyle",r.yc(25,Y,"green"===e.data.newBook.color?"#DCECDD":"#D4D7E4")),r.Kb(6),r.uc("ngIf",!a.valid&&a.touched),r.Kb(2),r.uc("mat-dialog-close",e.data)("disabled",t.invalid||"foo.png"==e.data.newImg.name)}},directives:[g.h,g.e,a.l,a.k,M,b.y,b.p,b.q,_.c,_.g,n.a,b.b,b.u,b.o,b.r,f.a,v.k,g.c,o.b,g.d,_.b],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}input[_ngcontent-%COMP%]{width:100%;width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#f4c606;color:#fff}.save-button[_ngcontent-%COMP%]{background-color:green;color:#fff}.new-book-form[_ngcontent-%COMP%]{width:100%}.form-field[_ngcontent-%COMP%]{width:90%}"]}),t})();var A=c("IheW"),X=c("I/3d");let N=(()=>{class t{constructor(t,e){this._http=t,this.firestore=e,this.subscriptions=e.collection("subscriptions").valueChanges()}getArticles(){return this.subscriptions}createArticle(t){return this.firestore.collection("subscriptions").doc().set({name:t.name,lastname:t.lastname,city:t.city,country:t.country,whatsapp:t.whatsapp,email:t.email,time:t.time}).then(()=>{console.log("Document successfully written!")}).catch(t=>{console.error("Error writing document: ",t)}),this.subscriptions=this.firestore.collection("subscriptions").valueChanges(),this.subscriptions}updateArticle(t){return this._http.post(this.apiurl+"articles/update/"+t.id,{id:t.id,price:t.price,description:t.description,jelpi_amount:t.jelpi_amount,company_amount:t.company_amount})}deleteArticle(t){return this.firestore.collection("cities").doc("DC").delete().then(()=>{console.log("Document successfully deleted!")}).catch(t=>{console.error("Error removing document: ",t)}),this._http.delete(this.apiurl+"articles/")}}return t.\u0275fac=function(e){return new(e||t)(r.hc(A.a),r.hc(X.a))},t.\u0275prov=r.Tb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function H(t,e){1&t&&(r.dc(0,"mat-header-cell",23),r.Lc(1," Fecha de creaci\xf3n "),r.cc())}function V(t,e){if(1&t&&(r.dc(0,"mat-cell"),r.dc(1,"span",24),r.Lc(2,"Fecha de creaci\xf3n:"),r.cc(),r.dc(3,"span",25),r.Lc(4),r.cc(),r.cc()),2&t){const t=e.$implicit,c=r.pc();r.Kb(4),r.Nc(" ",c.getDate(t.timestamp),"")}}function $(t,e){1&t&&(r.dc(0,"mat-header-cell",23),r.Lc(1," T\xedtulo "),r.cc())}function G(t,e){if(1&t&&(r.dc(0,"mat-cell"),r.dc(1,"span",24),r.Lc(2,"T\xedtulo:"),r.cc(),r.dc(3,"span",25),r.Lc(4),r.cc(),r.cc()),2&t){const t=e.$implicit;r.Kb(4),r.Nc(" ",t.title,"")}}function Q(t,e){1&t&&(r.dc(0,"mat-header-cell",23),r.Lc(1," Descripci\xf3n "),r.cc())}function W(t,e){if(1&t&&(r.dc(0,"mat-cell"),r.dc(1,"span",24),r.Lc(2,"Descripci\xf3n:"),r.cc(),r.Yb(3,"br"),r.dc(4,"span",26),r.Lc(5),r.cc(),r.cc()),2&t){const t=e.$implicit;r.Kb(5),r.Mc(t.description)}}function Z(t,e){1&t&&(r.dc(0,"mat-header-cell",23),r.Lc(1," Url de compra "),r.cc())}function tt(t,e){if(1&t&&(r.dc(0,"mat-cell",27),r.dc(1,"span",24),r.Lc(2,"Url de compra:"),r.cc(),r.Yb(3,"br"),r.dc(4,"span",26),r.Lc(5),r.cc(),r.cc()),2&t){const t=e.$implicit;r.Kb(5),r.Mc(t.buy_url)}}function et(t,e){1&t&&(r.dc(0,"mat-header-cell",23),r.Lc(1," Imagen "),r.cc())}const ct=function(t){return{"background-color":t}};function ot(t,e){if(1&t&&(r.dc(0,"mat-cell",28),r.dc(1,"span",24),r.Lc(2,"Imagen:"),r.cc(),r.Yb(3,"img",29),r.cc()),2&t){const t=e.$implicit;r.uc("ngStyle",r.yc(2,ct,"green"===t.color?"#DCECDD":"#D4D7E4")),r.Kb(3),r.vc("src",t.img,r.Ec)}}function nt(t,e){if(1&t){const t=r.ec();r.dc(0,"mat-header-cell",30),r.dc(1,"button",5),r.lc("click",(function(){return r.Dc(t),r.pc().openNewDialog()})),r.dc(2,"mat-icon"),r.Lc(3,"add_circle"),r.cc(),r.cc(),r.cc()}}function at(t,e){if(1&t){const t=r.ec();r.dc(0,"mat-cell",31),r.dc(1,"button",32),r.lc("click",(function(){r.Dc(t);const c=e.$implicit;return r.pc().openUpdateDialog(c)})),r.dc(2,"mat-icon"),r.Lc(3,"edit"),r.cc(),r.cc(),r.dc(4,"button",33),r.lc("click",(function(){r.Dc(t);const c=e.$implicit;return r.pc().openDeleteDialog(c)})),r.dc(5,"mat-icon"),r.Lc(6,"delete"),r.cc(),r.cc(),r.cc()}}function it(t,e){1&t&&r.Yb(0,"mat-header-row")}function lt(t,e){1&t&&r.Yb(0,"mat-row")}const rt=function(){return[5,10,25,100]};var st=[];let dt=(()=>{class t{constructor(t,e,c,o,n,a,i,l,r){this.cd=t,this._route=e,this._router=c,this._bookService=o,this._snackBar=n,this._httpClient=a,this._token=i,this._dialog=l,this.firestore=r,this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.displayedColumns=["timestamp","title","description","buy_url","img","action"],this.storageRef=m.a.storage().ref("books/"),this.message="",this.error="",this.mobile=!1,this.books=r.collection("books").get(),this.booksCollection=[]}ngOnInit(){360===window.screen.width&&(this.mobile=!0),this.books.subscribe(t=>{t.forEach(t=>{this.booksCollection.push(t.data())}),(st=this.booksCollection).sort((t,e)=>t.timestamp<e.timestamp?1:e.timestamp<t.timestamp?-1:0),this.dataSource=new u.k(st),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}openNewDialog(){let t={id:"",buy_url:"",description:"",img:"",color:"",title:"",timestamp:new Date},e=new File(["foo"],"foo.png",{type:"image/png"});this._dialog.open(z,{width:"550px",data:{newBook:t,newImg:e},disableClose:!0}).afterClosed().subscribe(t=>{null!=t&&this.firestore.collection("books").add(t.newBook).then(e=>{t.newBook.id=e.id;var c=t.newImg.slice(0,t.newImg.size,"image/png");t.newImg=new File([c],t.newBook.id+".png",{type:"image/png"}),this.storageRef.child(t.newImg.name).put(t.newImg).then(e=>{this.storageRef.child(t.newImg.name).getDownloadURL().then(e=>{t.newBook.img=e,this.cd.detectChanges(),this.firestore.collection("books").doc(t.newBook.id).set({id:t.newBook.id,img:t.newBook.img},{merge:!0})})}),st.unshift(t.newBook),st=st.sort((t,e)=>t.timestamp<e.timestamp?1:e.timestamp<t.timestamp?-1:0),this.dataSource=new u.k(st),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.showSnackBar("Libro guardado correctamente","success-snackbar",3)}).catch(t=>{this.showSnackBar("Error al guardar el libro.","warning-snackbar",3),console.error("Error writing document: ",t)})})}openUpdateDialog(t){let e=Object.assign({},t);this._dialog.open(P,{width:"550px",data:e,disableClose:!0}).afterClosed().subscribe(t=>{null!=t&&this.firestore.collection("books").doc(t.id).set(t).then(()=>{st=st.map(e=>e.id===t.id?t:e),this.dataSource=new u.k(st),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.showSnackBar("Libro guardado correctamente","success-snackbar",3)}).catch(t=>{this.showSnackBar("Error al guardar el libro.","warning-snackbar",3),console.error("Error writing document: ",t)})})}openDeleteDialog(t){let e=Object.assign({},t);this._dialog.open(S,{width:"350px",data:e,disableClose:!0}).afterClosed().subscribe(e=>{null!=e&&this.firestore.collection("books").doc(e.id).delete().then(()=>{this.storageRef.child(e.id+".png").delete().then(()=>{st.splice(st.indexOf(t),1),this.dataSource=new u.k(st),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.showSnackBar("Libro borrardo correctamente","success-snackbar",3)}).catch(t=>{this.showSnackBar("Error al borrar la imagen del libro","warning-snackbar",3),console.log("Error deleting image from storage",t)})}).catch(t=>{this.showSnackBar("Error al borrar el libro","warning-snackbar",3),console.log("Error deleting book from firestore",t)})})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}showSnackBar(t,e,c){this._snackBar.open(t,"Ok",{duration:1e3*c,panelClass:[e],horizontalPosition:this.snackBarHorizontalPosition,verticalPosition:this.snackBarHerticalPosition})}sendWhatsapp(t){window.open("https://api.whatsapp.com/send?phone="+t.countryCode+t.whatsapp,"_blank")}sendMail(t){window.open("https://mail.google.com/mail/?view=cm&fs=1&to="+t.email,"_blank")}getDate(t){console.log(t);var e=new Date(1e3*t);return console.log(e),e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}}return t.\u0275fac=function(e){return new(e||t)(r.Xb(r.h),r.Xb(i.a),r.Xb(i.c),r.Xb(N),r.Xb(p.b),r.Xb(A.a),r.Xb(A.a),r.Xb(g.b),r.Xb(X.a))},t.\u0275cmp=r.Rb({type:t,selectors:[["books-table"]],viewQuery:function(t,e){var c;1&t&&(r.Qc(s.a,!0),r.Qc(d.a,!0)),2&t&&(r.Ac(c=r.mc())&&(e.paginator=c.first),r.Ac(c=r.mc())&&(e.sort=c.first))},decls:36,vars:5,consts:[[1,"search-container","d-flex","justify-content-between"],["matInput","","placeholder","...",3,"keyup"],["searchInput",""],["matSuffix",""],[1,"display-mobile","ml-4"],["mat-mini-fab","","aria-label","hidden","color","danger",1,"new-button",3,"click"],[1,"table-container"],["matSort","",1,"mat-elevation-z8",3,"dataSource","dataSourceChange"],["matColumnDef","timestamp"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","buy_url",1,"email-row"],["class","email-row",4,"matCellDef"],["matColumnDef","img",1,"email-row"],["class","email-row",3,"ngStyle",4,"matCellDef"],["matColumnDef","action"],["class","actions-header",4,"matHeaderCellDef"],["class","actions-cell",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],[1,"display-mobile"],[2,"text-align","left"],[2,"text-align","left","max-width","97%"],[1,"email-row"],[1,"email-row",3,"ngStyle"],["alt","",2,"max-height","150px","max-width","75%","width","auto","; margin","0 auto",3,"src"],[1,"actions-header"],[1,"actions-cell"],["mat-mini-fab","","aria-label","hidden","color","primary",1,"edit-button",3,"click"],["mat-mini-fab","","aria-label","hidden","color","danger",1,"delete-button",3,"click"]],template:function(t,e){1&t&&(r.dc(0,"div",0),r.dc(1,"div"),r.dc(2,"mat-form-field"),r.dc(3,"mat-label"),r.Lc(4,"Buscar"),r.cc(),r.dc(5,"input",1,2),r.lc("keyup",(function(t){return e.applyFilter(t)})),r.cc(),r.dc(7,"mat-icon",3),r.Lc(8,"search"),r.cc(),r.cc(),r.cc(),r.dc(9,"div",4),r.dc(10,"button",5),r.lc("click",(function(){return e.openNewDialog()})),r.dc(11,"mat-icon"),r.Lc(12,"add_circle"),r.cc(),r.cc(),r.cc(),r.cc(),r.dc(13,"div",6),r.dc(14,"mat-table",7),r.lc("dataSourceChange",(function(t){return e.dataSource=t})),r.bc(15,8),r.Jc(16,H,2,0,"mat-header-cell",9),r.Jc(17,V,5,1,"mat-cell",10),r.ac(),r.bc(18,11),r.Jc(19,$,2,0,"mat-header-cell",9),r.Jc(20,G,5,1,"mat-cell",10),r.ac(),r.bc(21,12),r.Jc(22,Q,2,0,"mat-header-cell",9),r.Jc(23,W,6,1,"mat-cell",10),r.ac(),r.bc(24,13),r.Jc(25,Z,2,0,"mat-header-cell",9),r.Jc(26,tt,6,1,"mat-cell",14),r.ac(),r.bc(27,15),r.Jc(28,et,2,0,"mat-header-cell",9),r.Jc(29,ot,4,4,"mat-cell",16),r.ac(),r.bc(30,17),r.Jc(31,nt,4,0,"mat-header-cell",18),r.Jc(32,at,7,0,"mat-cell",19),r.ac(),r.Jc(33,it,1,0,"mat-header-row",20),r.Jc(34,lt,1,0,"mat-row",21),r.cc(),r.Yb(35,"mat-paginator",22),r.cc()),2&t&&(r.Kb(14),r.uc("dataSource",e.dataSource),r.Kb(19),r.uc("matHeaderRowDef",e.displayedColumns),r.Kb(1),r.uc("matRowDefColumns",e.displayedColumns),r.Kb(1),r.uc("pageSizeOptions",r.xc(4,rt)))},directives:[_.c,_.g,n.a,h.a,_.h,o.b,u.j,d.a,u.c,u.e,u.b,u.g,u.i,s.a,u.d,d.b,u.a,a.l,u.f,u.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.display-mobile[_ngcontent-%COMP%]{display:none}mat-header-cell[_ngcontent-%COMP%]{color:#fff;background-color:#263978;text-align:center;font-weight:bolder;font-size:12px}.search-container[_ngcontent-%COMP%]{margin-top:35px;width:250px}.edit-button[_ngcontent-%COMP%]{box-shadow:0 4px 4px #999;background-color:#f4c606}.delete-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;box-shadow:0 4px 4px #999;background-color:red}.new-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;background-color:green}.actions-cell[_ngcontent-%COMP%], .actions-header[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width:960px){.mat-header-cell[_ngcontent-%COMP%]{font-size:9px}.display-mobile[_ngcontent-%COMP%]{display:block;margin-right:10px;font-weight:bolder}mat-cell[_ngcontent-%COMP%]{text-align:center;margin:0;padding-right:0}mat-cell[_ngcontent-%COMP%]   .display-mobile[_ngcontent-%COMP%]{display:block;margin-right:10px;font-weight:bolder}}@media (min-width:960px){.mat-column-email[_ngcontent-%COMP%]{flex:0 0 28%!important;width:28%!important}.mat-column-country[_ngcontent-%COMP%], .mat-column-email[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-country[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}}  .mat-focused .mat-form-field-label{color:#263978!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:#263978!important}@media screen and (max-width:960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{border:10px solid;clip:rect(0 0 0 0);height:1px;margin:-1px;padding:0;position:absolute;width:1px}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding-left:20px}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.75em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}}"],changeDetection:0}),t})();const ut=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}ngAfterViewInit(){this.mySwiper=new l.a(".swiper-container")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Rb({type:t,selectors:[["app-books"]],decls:2,vars:0,consts:[[1,"table-container"]],template:function(t,e){1&t&&(r.dc(0,"div",0),r.Yb(1,"books-table"),r.cc())},directives:[dt],styles:[".table-container[_ngcontent-%COMP%]{margin:0 auto;width:100%}"]}),t})()}];let gt=(()=>{class t{}return t.\u0275mod=r.Vb({type:t}),t.\u0275inj=r.Ub({factory:function(e){return new(e||t)},imports:[[i.f.forChild(ut)],i.f]}),t})(),bt=(()=>{class t{}return t.\u0275mod=r.Vb({type:t}),t.\u0275inj=r.Ub({factory:function(e){return new(e||t)},imports:[[a.c,gt,u.l,_.e,s.b,n.b,d.c,h.b,g.f,b.i,o.c,f.b,x],u.l,_.e,s.b,_.e,s.b,n.b,d.c,h.b,g.f,b.i,x]}),t})()}}]);