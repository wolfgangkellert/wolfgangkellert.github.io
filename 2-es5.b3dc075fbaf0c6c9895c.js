function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,c){return e&&_defineProperties(t.prototype,e),c&&_defineProperties(t,c),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"jO/s":function(t,e,c){"use strict";c.r(e),c.d(e,"SubscriptionsModule",(function(){return Q}));var n,a,o,i,r=c("bTqV"),l=c("qFsG"),s=c("SVse"),u=c("iInd"),d=c("bTu8"),m=c("8Y7J"),p=c("M9IT"),f=c("Dh3D"),h=c("+0xr"),b=c("0IaG"),g=c("3Pt+"),w=((o=function(){function t(e,c){_classCallCheck(this,t),this.dialogRef=e,this.data=c,this.updateArticleForm=new g.g({price:new g.d("",[g.w.required]),description:new g.d("",[g.w.required]),jelpi_amount:new g.d("",[g.w.required,g.w.pattern("[[0-9]*.?[0-9]{0,2}")]),company_amount:new g.d("",[g.w.required,g.w.pattern("[0-9]*.?[0-9]{0,2}")])})}return _createClass(t,[{key:"updateArticles",value:function(){this.dialogRef.close()}},{key:"toFloat",value:function(t){return parseFloat(t)}}]),t}()).\u0275fac=function(t){return new(t||o)(m.Xb(b.g),m.Xb(b.a))},o.\u0275cmp=m.Rb({type:o,selectors:[["article-editdialog"]],decls:2,vars:0,consts:[["mat-dialog-title",""]],template:function(t,e){1&t&&(m.dc(0,"h1",0),m.Lc(1,"Editar Articulo"),m.cc())},directives:[b.h],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}input[_ngcontent-%COMP%]{width:80%}"]}),o),C=((a=function(){function t(e,c){_classCallCheck(this,t),this.dialogRef=e,this.data=c}return _createClass(t,[{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"toFloat",value:function(t){return parseFloat(t)}}]),t}()).\u0275fac=function(t){return new(t||a)(m.Xb(b.g),m.Xb(b.a))},a.\u0275cmp=m.Rb({type:a,selectors:[["article-deletedialog"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"width","80%"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",1,"delete-button",3,"mat-dialog-close"],["mat-button","",1,"no-delete-button",3,"click"]],template:function(t,e){1&t&&(m.dc(0,"h1",0),m.Lc(1,"Desea eliminar articulo?"),m.cc(),m.Yb(2,"div",1),m.dc(3,"div",2),m.dc(4,"button",3),m.Lc(5,"Si, eliminar"),m.cc(),m.dc(6,"button",4),m.lc("click",(function(){return e.onNoClick()})),m.Lc(7,"No"),m.cc(),m.cc()),2&t&&(m.Kb(4),m.uc("mat-dialog-close",e.data))},directives:[b.h,b.e,b.c,r.b,b.d],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}input[_ngcontent-%COMP%]{width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#c00000;color:#fff}.delete-button[_ngcontent-%COMP%]{background-color:#138535;color:#fff}"]}),a),_=((n=function(){function t(e,c){_classCallCheck(this,t),this.dialogRef=e,this.data=c,this.updateArticleForm=new g.g({price:new g.d("",[g.w.required]),description:new g.d("",[g.w.required]),jelpi_amount:new g.d("",[g.w.required,g.w.pattern("[[0-9]*.?[0-9]{0,2}")]),company_amount:new g.d("",[g.w.required,g.w.pattern("[0-9]*.?[0-9]{0,2}")])})}return _createClass(t,[{key:"updateArticles",value:function(){this.dialogRef.close()}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"toFloat",value:function(t){return parseFloat(t)}}]),t}()).\u0275fac=function(t){return new(t||n)(m.Xb(b.g),m.Xb(b.a))},n.\u0275cmp=m.Rb({type:n,selectors:[["article-newdialog"]],decls:2,vars:0,consts:[["mat-dialog-title",""]],template:function(t,e){1&t&&(m.dc(0,"h1",0),m.Lc(1,"Nuevo Articulo"),m.cc())},directives:[b.h],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}input[_ngcontent-%COMP%]{width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#f4c606;color:#fff}.save-button[_ngcontent-%COMP%]{background-color:green;color:#fff}"]}),n),k=c("IheW"),y=c("I/3d"),v=((i=function(){function t(e,c){_classCallCheck(this,t),this._http=e,this.firestore=c,this.subscriptions=c.collection("subscriptions").valueChanges()}return _createClass(t,[{key:"getArticles",value:function(){return this.subscriptions}},{key:"createArticle",value:function(t){return this.firestore.collection("subscriptions").doc().set({name:t.name,lastname:t.lastname,city:t.city,country:t.country,whatsapp:t.whatsapp,email:t.email,time:t.time}).then((function(){console.log("Document successfully written!")})).catch((function(t){console.error("Error writing document: ",t)})),this.subscriptions=this.firestore.collection("subscriptions").valueChanges(),this.subscriptions}},{key:"updateArticle",value:function(t){return this._http.post(this.apiurl+"articles/update/"+t.id,{id:t.id,price:t.price,description:t.description,jelpi_amount:t.jelpi_amount,company_amount:t.company_amount})}},{key:"deleteArticle",value:function(t){return this.firestore.collection("cities").doc("DC").delete().then((function(){console.log("Document successfully deleted!")})).catch((function(t){console.error("Error removing document: ",t)})),this._http.delete(this.apiurl+"articles/")}}]),t}()).\u0275fac=function(t){return new(t||i)(m.hc(k.a),m.hc(y.a))},i.\u0275prov=m.Tb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),P=c("dNgK"),O=c("kmnG"),M=c("NFeN");function S(t,e){1&t&&(m.dc(0,"mat-header-cell",22),m.Lc(1," Nombre "),m.cc())}function x(t,e){if(1&t&&(m.dc(0,"mat-cell"),m.dc(1,"span",23),m.Lc(2,"Nombre:"),m.cc(),m.dc(3,"span",24),m.Lc(4),m.cc(),m.cc()),2&t){var c=e.$implicit;m.Kb(4),m.Mc(c.name)}}function D(t,e){1&t&&(m.dc(0,"mat-header-cell",22),m.Lc(1," Apellidos "),m.cc())}function L(t,e){if(1&t&&(m.dc(0,"mat-cell"),m.dc(1,"span",23),m.Lc(2,"Apellidos:"),m.cc(),m.dc(3,"span",24),m.Lc(4),m.cc(),m.cc()),2&t){var c=e.$implicit;m.Kb(4),m.Mc(c.lastname)}}function R(t,e){1&t&&(m.dc(0,"mat-header-cell",22),m.Lc(1," Ciudad "),m.cc())}function A(t,e){if(1&t&&(m.dc(0,"mat-cell"),m.dc(1,"span",23),m.Lc(2,"Ciudad:"),m.cc(),m.dc(3,"span",24),m.Lc(4),m.cc(),m.cc()),2&t){var c=e.$implicit;m.Kb(4),m.Mc(c.city)}}function E(t,e){1&t&&(m.dc(0,"mat-header-cell",22),m.Lc(1," Pa\xeds "),m.cc())}function J(t,e){if(1&t&&(m.dc(0,"mat-cell",25),m.dc(1,"span",23),m.Lc(2,"Pa\xeds:"),m.cc(),m.dc(3,"span",24),m.Lc(4),m.cc(),m.cc()),2&t){var c=e.$implicit;m.Kb(4),m.Mc(c.country)}}function I(t,e){1&t&&(m.dc(0,"mat-header-cell",22),m.Lc(1," Whatsapp "),m.cc())}function B(t,e){if(1&t&&(m.dc(0,"mat-cell"),m.dc(1,"span",23),m.Lc(2,"Whastapp:"),m.cc(),m.dc(3,"span",24),m.Lc(4),m.cc(),m.cc()),2&t){var c=e.$implicit;m.Kb(4),m.Mc(c.whatsapp)}}function X(t,e){1&t&&(m.dc(0,"mat-header-cell",26),m.Lc(1," Email "),m.cc())}function F(t,e){if(1&t&&(m.dc(0,"mat-cell",25),m.dc(1,"span",23),m.Lc(2,"Email:"),m.cc(),m.dc(3,"span",27),m.Lc(4),m.cc(),m.cc()),2&t){var c=e.$implicit;m.Kb(4),m.Mc(c.email)}}function j(t,e){1&t&&m.Yb(0,"mat-header-cell",28)}function z(t,e){if(1&t){var c=m.ec();m.dc(0,"mat-cell",29),m.dc(1,"button",30),m.lc("click",(function(){m.Dc(c);var t=e.$implicit;return m.pc().sendWhatsapp(t)})),m.dc(2,"mat-icon"),m.Lc(3,"phone"),m.cc(),m.cc(),m.dc(4,"button",31),m.lc("click",(function(){m.Dc(c);var t=e.$implicit;return m.pc().sendMail(t)})),m.dc(5,"mat-icon"),m.Lc(6,"email"),m.cc(),m.cc(),m.cc()}}function K(t,e){1&t&&m.Yb(0,"mat-header-row")}function N(t,e){1&t&&m.Yb(0,"mat-row")}var q,H,T,V,$=function(){return[5,10,25,100]},Y=[],U=((q=function(){function t(e,c,n,a,o,i,r,l){_classCallCheck(this,t),this._route=e,this._router=c,this._subscriptionService=n,this._snackBar=a,this._httpClient=o,this._token=i,this._dialog=r,this.firestore=l,this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.displayedColumns=["name","lastname","city","country","whatsapp","email","action"],this.message="",this.error="",this.mobile=!1,this.subscriptions=l.collection("subscriptions").get(),this.subscriptionsCollection=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;360===window.screen.width&&(this.mobile=!0),this.subscriptions.subscribe((function(e){e.forEach((function(e){t.subscriptionsCollection.push(e.data())})),t.dataSource=new h.k(Y=t.subscriptionsCollection),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort}))}},{key:"openUpdateDialog",value:function(t){var e=this,c=Object.assign({},t);this._dialog.open(w,{width:"350px",data:c,disableClose:!0}).afterClosed().subscribe((function(t){e._subscriptionService.updateArticle(t).subscribe((function(t){e.status=t.status,console.log("RESPUESTA DE SERVIDOR:"),console.log(t.data),Y=Y.map((function(e){return e.id===t.data.id?t.data:e})),e.dataSource=new h.k(Y),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort,console.log(Y),e.showSnackBar("Articulo guardado correctamente","success-snackbar",3)}),(function(t){e.showSnackBar("Error al actualizar el articulo","warning-snackbar",3),console.log(t)}))}))}},{key:"openDeleteDialog",value:function(t){var e=this,c=Object.assign({},t);this._dialog.open(C,{width:"350px",data:c,disableClose:!0}).afterClosed().subscribe((function(t){console.log(t),e._subscriptionService.deleteArticle(t).subscribe((function(c){e.status=c.status,console.log("RESPUESTA DE SERVIDOR:"),console.log(t),console.log(Y),Y.splice(t,1),console.log(Y),e.dataSource=new h.k(Y),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort,e.showSnackBar("Articulo borrardo correctamente","success-snackbar",3)}),(function(t){e.showSnackBar("Error al borrar el articulo","warning-snackbar",3),console.log(t)}))}))}},{key:"openNewDialog",value:function(){var t=this;this._dialog.open(_,{width:"350px",data:{},disableClose:!0}).afterClosed().subscribe((function(e){console.log(e),t._subscriptionService.createArticle(e).subscribe((function(c){t.status=c.status,console.log("RESPUESTA DE SERVIDOR:"),console.log(e),Y.unshift(e),t.dataSource=new h.k(Y),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort,t.showSnackBar("Articulo creado correctamente","success-snackbar",3)}),(function(e){t.showSnackBar("Error al crear el articulo","warning-snackbar",3),console.log(e)}))}))}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"showSnackBar",value:function(t,e,c){this._snackBar.open(t,"Ok",{duration:1e3*c,panelClass:[e],horizontalPosition:this.snackBarHorizontalPosition,verticalPosition:this.snackBarHerticalPosition})}},{key:"sendWhatsapp",value:function(t){window.open("https://api.whatsapp.com/send?phone="+t.countryCode+t.whatsapp,"_blank")}},{key:"sendMail",value:function(t){window.open("https://mail.google.com/mail/?view=cm&fs=1&to="+t.email,"_blank")}}]),t}()).\u0275fac=function(t){return new(t||q)(m.Xb(u.a),m.Xb(u.c),m.Xb(v),m.Xb(P.b),m.Xb(k.a),m.Xb(k.a),m.Xb(b.b),m.Xb(y.a))},q.\u0275cmp=m.Rb({type:q,selectors:[["subscriptions-table"]],viewQuery:function(t,e){var c;1&t&&(m.Qc(p.a,!0),m.Qc(f.a,!0)),2&t&&(m.Ac(c=m.mc())&&(e.paginator=c.first),m.Ac(c=m.mc())&&(e.sort=c.first))},decls:34,vars:5,consts:[[1,"search-container"],["matInput","","placeholder","...",3,"keyup"],["searchInput",""],["matSuffix",""],[1,"table-container"],["matSort","",1,"mat-elevation-z8",3,"dataSource","dataSourceChange"],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastname"],["matColumnDef","city"],["matColumnDef","country",1,"email-row"],["class","email-row",4,"matCellDef"],["matColumnDef","whatsapp"],["matColumnDef","email"],["mat-sort-header","","class","email-row",4,"matHeaderCellDef"],["matColumnDef","action"],["class","actions-header",4,"matHeaderCellDef"],["class","actions-cell",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],[1,"display-mobile"],[2,"text-align","left"],[1,"email-row"],["mat-sort-header","",1,"email-row"],[2,"text-align","left","max-width","97%"],[1,"actions-header"],[1,"actions-cell"],["mat-mini-fab","","aria-label","hidden","color","danger",1,"new-button","mr-1",3,"click"],["mat-mini-fab","","aria-label","hidden","color","primary",1,"edit-button",3,"click"]],template:function(t,e){1&t&&(m.dc(0,"div",0),m.dc(1,"mat-form-field"),m.dc(2,"mat-label"),m.Lc(3,"Buscar"),m.cc(),m.dc(4,"input",1,2),m.lc("keyup",(function(t){return e.applyFilter(t)})),m.cc(),m.dc(6,"mat-icon",3),m.Lc(7,"search"),m.cc(),m.cc(),m.cc(),m.dc(8,"div",4),m.dc(9,"mat-table",5),m.lc("dataSourceChange",(function(t){return e.dataSource=t})),m.bc(10,6),m.Jc(11,S,2,0,"mat-header-cell",7),m.Jc(12,x,5,1,"mat-cell",8),m.ac(),m.bc(13,9),m.Jc(14,D,2,0,"mat-header-cell",7),m.Jc(15,L,5,1,"mat-cell",8),m.ac(),m.bc(16,10),m.Jc(17,R,2,0,"mat-header-cell",7),m.Jc(18,A,5,1,"mat-cell",8),m.ac(),m.bc(19,11),m.Jc(20,E,2,0,"mat-header-cell",7),m.Jc(21,J,5,1,"mat-cell",12),m.ac(),m.bc(22,13),m.Jc(23,I,2,0,"mat-header-cell",7),m.Jc(24,B,5,1,"mat-cell",8),m.ac(),m.bc(25,14),m.Jc(26,X,2,0,"mat-header-cell",15),m.Jc(27,F,5,1,"mat-cell",12),m.ac(),m.bc(28,16),m.Jc(29,j,1,0,"mat-header-cell",17),m.Jc(30,z,7,0,"mat-cell",18),m.ac(),m.Jc(31,K,1,0,"mat-header-row",19),m.Jc(32,N,1,0,"mat-row",20),m.cc(),m.Yb(33,"mat-paginator",21),m.cc()),2&t&&(m.Kb(9),m.uc("dataSource",e.dataSource),m.Kb(22),m.uc("matHeaderRowDef",e.displayedColumns),m.Kb(1),m.uc("matRowDefColumns",e.displayedColumns),m.Kb(1),m.uc("pageSizeOptions",m.xc(4,$)))},directives:[O.c,O.g,l.a,M.a,O.h,h.j,f.a,h.c,h.e,h.b,h.g,h.i,p.a,h.d,f.b,h.a,r.b,h.f,h.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.display-mobile[_ngcontent-%COMP%]{display:none}mat-header-cell[_ngcontent-%COMP%]{color:#fff;background-color:#263978;text-align:center;font-weight:bolder;font-size:12px}.search-container[_ngcontent-%COMP%]{margin-top:35px;width:250px}.edit-button[_ngcontent-%COMP%]{box-shadow:0 4px 4px #999;background-color:#f4c606}.delete-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;box-shadow:0 4px 4px #999;background-color:red}.new-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;background-color:green}.actions-cell[_ngcontent-%COMP%], .actions-header[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width:960px){.mat-header-cell[_ngcontent-%COMP%]{font-size:9px}mat-cell[_ngcontent-%COMP%]{text-align:center;margin:0;padding-right:0}mat-cell[_ngcontent-%COMP%]   .display-mobile[_ngcontent-%COMP%]{display:block;margin-right:20px;font-weight:bolder}}@media (min-width:960px){.mat-column-email[_ngcontent-%COMP%]{flex:0 0 28%!important;width:28%!important}.mat-column-country[_ngcontent-%COMP%], .mat-column-email[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-country[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}}  .mat-focused .mat-form-field-label{color:#263978!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:#263978!important}@media screen and (max-width:960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{border:10px solid;clip:rect(0 0 0 0);height:1px;margin:-1px;padding:0;position:absolute;width:1px}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding-left:20px}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.85em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}}"]}),q),W=[{path:"",component:(H=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.mySwiper=new d.a(".swiper-container")}}]),t}(),H.\u0275fac=function(t){return new(t||H)},H.\u0275cmp=m.Rb({type:H,selectors:[["app-subscriptions"]],decls:2,vars:0,consts:[[1,"table-container"]],template:function(t,e){1&t&&(m.dc(0,"div",0),m.Yb(1,"subscriptions-table"),m.cc())},directives:[U],styles:[".table-container[_ngcontent-%COMP%]{margin:0 auto;width:100%}"]}),H)}],G=((V=function t(){_classCallCheck(this,t)}).\u0275mod=m.Vb({type:V}),V.\u0275inj=m.Ub({factory:function(t){return new(t||V)},imports:[[u.f.forChild(W)],u.f]}),V),Q=((T=function t(){_classCallCheck(this,t)}).\u0275mod=m.Vb({type:T}),T.\u0275inj=m.Ub({factory:function(t){return new(t||T)},imports:[[s.c,G,h.l,O.e,p.b,l.b,f.c,M.b,b.f,g.i,r.c],h.l,O.e,p.b,O.e,p.b,l.b,f.c,M.b,b.f,g.i]}),T)}}]);