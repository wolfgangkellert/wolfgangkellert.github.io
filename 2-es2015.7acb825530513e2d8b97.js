(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"jO/s":function(t,e,c){"use strict";c.r(e),c.d(e,"SubscriptionsModule",(function(){return H}));var n=c("bTqV"),a=c("qFsG"),o=c("SVse"),i=c("iInd"),r=c("bTu8"),s=c("8Y7J"),l=c("M9IT"),d=c("Dh3D"),u=c("+0xr"),m=c("0IaG"),p=c("3Pt+");let h=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.updateArticleForm=new p.g({price:new p.d("",[p.w.required]),description:new p.d("",[p.w.required]),jelpi_amount:new p.d("",[p.w.required,p.w.pattern("[[0-9]*.?[0-9]{0,2}")]),company_amount:new p.d("",[p.w.required,p.w.pattern("[0-9]*.?[0-9]{0,2}")])})}updateArticles(){this.dialogRef.close()}toFloat(t){return parseFloat(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(m.g),s.Xb(m.a))},t.\u0275cmp=s.Rb({type:t,selectors:[["article-editdialog"]],decls:2,vars:0,consts:[["mat-dialog-title",""]],template:function(t,e){1&t&&(s.dc(0,"h1",0),s.Lc(1,"Editar Articulo"),s.cc())},directives:[m.h],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}input[_ngcontent-%COMP%]{width:80%}"]}),t})(),b=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}onNoClick(){this.dialogRef.close()}toFloat(t){return parseFloat(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(m.g),s.Xb(m.a))},t.\u0275cmp=s.Rb({type:t,selectors:[["article-deletedialog"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"width","80%"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",1,"delete-button",3,"mat-dialog-close"],["mat-button","",1,"no-delete-button",3,"click"]],template:function(t,e){1&t&&(s.dc(0,"h1",0),s.Lc(1,"Desea eliminar articulo?"),s.cc(),s.Yb(2,"div",1),s.dc(3,"div",2),s.dc(4,"button",3),s.Lc(5,"Si, eliminar"),s.cc(),s.dc(6,"button",4),s.lc("click",(function(){return e.onNoClick()})),s.Lc(7,"No"),s.cc(),s.cc()),2&t&&(s.Kb(4),s.uc("mat-dialog-close",e.data))},directives:[m.h,m.e,m.c,n.b,m.d],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}input[_ngcontent-%COMP%]{width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#c00000;color:#fff}.delete-button[_ngcontent-%COMP%]{background-color:#138535;color:#fff}"]}),t})(),g=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.updateArticleForm=new p.g({price:new p.d("",[p.w.required]),description:new p.d("",[p.w.required]),jelpi_amount:new p.d("",[p.w.required,p.w.pattern("[[0-9]*.?[0-9]{0,2}")]),company_amount:new p.d("",[p.w.required,p.w.pattern("[0-9]*.?[0-9]{0,2}")])})}updateArticles(){this.dialogRef.close()}onNoClick(){this.dialogRef.close()}toFloat(t){return parseFloat(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(m.g),s.Xb(m.a))},t.\u0275cmp=s.Rb({type:t,selectors:[["article-newdialog"]],decls:2,vars:0,consts:[["mat-dialog-title",""]],template:function(t,e){1&t&&(s.dc(0,"h1",0),s.Lc(1,"Nuevo Articulo"),s.cc())},directives:[m.h],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}input[_ngcontent-%COMP%]{width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#f4c606;color:#fff}.save-button[_ngcontent-%COMP%]{background-color:green;color:#fff}"]}),t})();var f=c("IheW"),w=c("I/3d");let C=(()=>{class t{constructor(t,e){this._http=t,this.firestore=e,this.subscriptions=e.collection("subscriptions").valueChanges()}getArticles(){return this.subscriptions}createArticle(t){return this.firestore.collection("subscriptions").doc().set({name:t.name,lastname:t.lastname,city:t.city,country:t.country,whatsapp:t.whatsapp,email:t.email,time:t.time}).then(()=>{console.log("Document successfully written!")}).catch(t=>{console.error("Error writing document: ",t)}),this.subscriptions=this.firestore.collection("subscriptions").valueChanges(),this.subscriptions}updateArticle(t){return this._http.post(this.apiurl+"articles/update/"+t.id,{id:t.id,price:t.price,description:t.description,jelpi_amount:t.jelpi_amount,company_amount:t.company_amount})}deleteArticle(t){return this.firestore.collection("cities").doc("DC").delete().then(()=>{console.log("Document successfully deleted!")}).catch(t=>{console.error("Error removing document: ",t)}),this._http.delete(this.apiurl+"articles/")}}return t.\u0275fac=function(e){return new(e||t)(s.hc(f.a),s.hc(w.a))},t.\u0275prov=s.Tb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=c("dNgK"),P=c("kmnG"),O=c("NFeN");function M(t,e){1&t&&(s.dc(0,"mat-header-cell",22),s.Lc(1," Nombre "),s.cc())}function k(t,e){if(1&t&&(s.dc(0,"mat-cell"),s.dc(1,"span",23),s.Lc(2,"Nombre:"),s.cc(),s.dc(3,"span",24),s.Lc(4),s.cc(),s.cc()),2&t){const t=e.$implicit;s.Kb(4),s.Mc(t.name)}}function y(t,e){1&t&&(s.dc(0,"mat-header-cell",22),s.Lc(1," Apellidos "),s.cc())}function S(t,e){if(1&t&&(s.dc(0,"mat-cell"),s.dc(1,"span",23),s.Lc(2,"Apellidos:"),s.cc(),s.dc(3,"span",24),s.Lc(4),s.cc(),s.cc()),2&t){const t=e.$implicit;s.Kb(4),s.Mc(t.lastname)}}function x(t,e){1&t&&(s.dc(0,"mat-header-cell",22),s.Lc(1," Ciudad "),s.cc())}function v(t,e){if(1&t&&(s.dc(0,"mat-cell"),s.dc(1,"span",23),s.Lc(2,"Ciudad:"),s.cc(),s.dc(3,"span",24),s.Lc(4),s.cc(),s.cc()),2&t){const t=e.$implicit;s.Kb(4),s.Mc(t.city)}}function D(t,e){1&t&&(s.dc(0,"mat-header-cell",22),s.Lc(1," Pa\xeds "),s.cc())}function L(t,e){if(1&t&&(s.dc(0,"mat-cell",25),s.dc(1,"span",23),s.Lc(2,"Pa\xeds:"),s.cc(),s.dc(3,"span",24),s.Lc(4),s.cc(),s.cc()),2&t){const t=e.$implicit;s.Kb(4),s.Mc(t.country)}}function R(t,e){1&t&&(s.dc(0,"mat-header-cell",22),s.Lc(1," Whatsapp "),s.cc())}function A(t,e){if(1&t&&(s.dc(0,"mat-cell"),s.dc(1,"span",23),s.Lc(2,"Whastapp:"),s.cc(),s.dc(3,"span",24),s.Lc(4),s.cc(),s.cc()),2&t){const t=e.$implicit;s.Kb(4),s.Mc(t.whatsapp)}}function E(t,e){1&t&&(s.dc(0,"mat-header-cell",26),s.Lc(1," Email "),s.cc())}function J(t,e){if(1&t&&(s.dc(0,"mat-cell",25),s.dc(1,"span",23),s.Lc(2,"Email:"),s.cc(),s.dc(3,"span",27),s.Lc(4),s.cc(),s.cc()),2&t){const t=e.$implicit;s.Kb(4),s.Mc(t.email)}}function I(t,e){1&t&&s.Yb(0,"mat-header-cell",28)}function B(t,e){if(1&t){const t=s.ec();s.dc(0,"mat-cell",29),s.dc(1,"button",30),s.lc("click",(function(){s.Dc(t);const c=e.$implicit;return s.pc().sendWhatsapp(c)})),s.dc(2,"mat-icon"),s.Lc(3,"phone"),s.cc(),s.cc(),s.dc(4,"button",31),s.lc("click",(function(){s.Dc(t);const c=e.$implicit;return s.pc().sendMail(c)})),s.dc(5,"mat-icon"),s.Lc(6,"email"),s.cc(),s.cc(),s.cc()}}function X(t,e){1&t&&s.Yb(0,"mat-header-row")}function F(t,e){1&t&&s.Yb(0,"mat-row")}const z=function(){return[5,10,25,100]};var K=[];let j=(()=>{class t{constructor(t,e,c,n,a,o,i,r){this._route=t,this._router=e,this._subscriptionService=c,this._snackBar=n,this._httpClient=a,this._token=o,this._dialog=i,this.firestore=r,this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.displayedColumns=["name","lastname","city","country","whatsapp","email","action"],this.message="",this.error="",this.mobile=!1,this.subscriptions=r.collection("subscriptions").get(),this.subscriptionsCollection=[]}ngOnInit(){360===window.screen.width&&(this.mobile=!0),this.subscriptions.subscribe(t=>{t.forEach(t=>{this.subscriptionsCollection.push(t.data())}),this.dataSource=new u.k(K=this.subscriptionsCollection),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}openUpdateDialog(t){let e=Object.assign({},t);this._dialog.open(h,{width:"350px",data:e,disableClose:!0}).afterClosed().subscribe(t=>{this._subscriptionService.updateArticle(t).subscribe(t=>{this.status=t.status,console.log("RESPUESTA DE SERVIDOR:"),console.log(t.data),K=K.map(e=>e.id===t.data.id?t.data:e),this.dataSource=new u.k(K),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,console.log(K),this.showSnackBar("Articulo guardado correctamente","success-snackbar",3)},t=>{this.showSnackBar("Error al actualizar el articulo","warning-snackbar",3),console.log(t)})})}openDeleteDialog(t){let e=Object.assign({},t);this._dialog.open(b,{width:"350px",data:e,disableClose:!0}).afterClosed().subscribe(t=>{console.log(t),this._subscriptionService.deleteArticle(t).subscribe(e=>{this.status=e.status,console.log("RESPUESTA DE SERVIDOR:"),console.log(t),console.log(K),K.splice(t,1),console.log(K),this.dataSource=new u.k(K),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.showSnackBar("Articulo borrardo correctamente","success-snackbar",3)},t=>{this.showSnackBar("Error al borrar el articulo","warning-snackbar",3),console.log(t)})})}openNewDialog(){this._dialog.open(g,{width:"350px",data:{},disableClose:!0}).afterClosed().subscribe(t=>{console.log(t),this._subscriptionService.createArticle(t).subscribe(e=>{this.status=e.status,console.log("RESPUESTA DE SERVIDOR:"),console.log(t),K.unshift(t),this.dataSource=new u.k(K),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.showSnackBar("Articulo creado correctamente","success-snackbar",3)},t=>{this.showSnackBar("Error al crear el articulo","warning-snackbar",3),console.log(t)})})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}showSnackBar(t,e,c){this._snackBar.open(t,"Ok",{duration:1e3*c,panelClass:[e],horizontalPosition:this.snackBarHorizontalPosition,verticalPosition:this.snackBarHerticalPosition})}sendWhatsapp(t){window.open("https://api.whatsapp.com/send?phone="+t.countryCode+t.whatsapp,"_blank")}sendMail(t){window.open("https://mail.google.com/mail/?view=cm&fs=1&to="+t.email,"_blank")}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(i.a),s.Xb(i.c),s.Xb(C),s.Xb(_.b),s.Xb(f.a),s.Xb(f.a),s.Xb(m.b),s.Xb(w.a))},t.\u0275cmp=s.Rb({type:t,selectors:[["subscriptions-table"]],viewQuery:function(t,e){var c;1&t&&(s.Qc(l.a,!0),s.Qc(d.a,!0)),2&t&&(s.Ac(c=s.mc())&&(e.paginator=c.first),s.Ac(c=s.mc())&&(e.sort=c.first))},decls:34,vars:5,consts:[[1,"search-container"],["matInput","","placeholder","...",3,"keyup"],["searchInput",""],["matSuffix",""],[1,"table-container"],["matSort","",1,"mat-elevation-z8",3,"dataSource","dataSourceChange"],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastname"],["matColumnDef","city"],["matColumnDef","country",1,"email-row"],["class","email-row",4,"matCellDef"],["matColumnDef","whatsapp"],["matColumnDef","email"],["mat-sort-header","","class","email-row",4,"matHeaderCellDef"],["matColumnDef","action"],["class","actions-header",4,"matHeaderCellDef"],["class","actions-cell",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],[1,"display-mobile"],[2,"text-align","left"],[1,"email-row"],["mat-sort-header","",1,"email-row"],[2,"text-align","left","max-width","97%"],[1,"actions-header"],[1,"actions-cell"],["mat-mini-fab","","aria-label","hidden","color","danger",1,"new-button","mr-1",3,"click"],["mat-mini-fab","","aria-label","hidden","color","primary",1,"edit-button",3,"click"]],template:function(t,e){1&t&&(s.dc(0,"div",0),s.dc(1,"mat-form-field"),s.dc(2,"mat-label"),s.Lc(3,"Buscar"),s.cc(),s.dc(4,"input",1,2),s.lc("keyup",(function(t){return e.applyFilter(t)})),s.cc(),s.dc(6,"mat-icon",3),s.Lc(7,"search"),s.cc(),s.cc(),s.cc(),s.dc(8,"div",4),s.dc(9,"mat-table",5),s.lc("dataSourceChange",(function(t){return e.dataSource=t})),s.bc(10,6),s.Jc(11,M,2,0,"mat-header-cell",7),s.Jc(12,k,5,1,"mat-cell",8),s.ac(),s.bc(13,9),s.Jc(14,y,2,0,"mat-header-cell",7),s.Jc(15,S,5,1,"mat-cell",8),s.ac(),s.bc(16,10),s.Jc(17,x,2,0,"mat-header-cell",7),s.Jc(18,v,5,1,"mat-cell",8),s.ac(),s.bc(19,11),s.Jc(20,D,2,0,"mat-header-cell",7),s.Jc(21,L,5,1,"mat-cell",12),s.ac(),s.bc(22,13),s.Jc(23,R,2,0,"mat-header-cell",7),s.Jc(24,A,5,1,"mat-cell",8),s.ac(),s.bc(25,14),s.Jc(26,E,2,0,"mat-header-cell",15),s.Jc(27,J,5,1,"mat-cell",12),s.ac(),s.bc(28,16),s.Jc(29,I,1,0,"mat-header-cell",17),s.Jc(30,B,7,0,"mat-cell",18),s.ac(),s.Jc(31,X,1,0,"mat-header-row",19),s.Jc(32,F,1,0,"mat-row",20),s.cc(),s.Yb(33,"mat-paginator",21),s.cc()),2&t&&(s.Kb(9),s.uc("dataSource",e.dataSource),s.Kb(22),s.uc("matHeaderRowDef",e.displayedColumns),s.Kb(1),s.uc("matRowDefColumns",e.displayedColumns),s.Kb(1),s.uc("pageSizeOptions",s.xc(4,z)))},directives:[P.c,P.g,a.a,O.a,P.h,u.j,d.a,u.c,u.e,u.b,u.g,u.i,l.a,u.d,d.b,u.a,n.b,u.f,u.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.display-mobile[_ngcontent-%COMP%]{display:none}mat-header-cell[_ngcontent-%COMP%]{color:#fff;background-color:#263978;text-align:center;font-weight:bolder;font-size:12px}.search-container[_ngcontent-%COMP%]{margin-top:35px;width:250px}.edit-button[_ngcontent-%COMP%]{box-shadow:0 4px 4px #999;background-color:#f4c606}.delete-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;box-shadow:0 4px 4px #999;background-color:red}.new-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;background-color:green}.actions-cell[_ngcontent-%COMP%], .actions-header[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width:960px){.mat-header-cell[_ngcontent-%COMP%]{font-size:9px}mat-cell[_ngcontent-%COMP%]{text-align:center;margin:0;padding-right:0}mat-cell[_ngcontent-%COMP%]   .display-mobile[_ngcontent-%COMP%]{display:block;margin-right:20px;font-weight:bolder}}@media (min-width:960px){.mat-column-email[_ngcontent-%COMP%]{flex:0 0 28%!important;width:28%!important}.mat-column-country[_ngcontent-%COMP%], .mat-column-email[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-country[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}}  .mat-focused .mat-form-field-label{color:#263978!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:#263978!important}@media screen and (max-width:960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{border:10px solid;clip:rect(0 0 0 0);height:1px;margin:-1px;padding:0;position:absolute;width:1px}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding-left:20px}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.85em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}}"]}),t})();const N=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}ngAfterViewInit(){this.mySwiper=new r.a(".swiper-container")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Rb({type:t,selectors:[["app-subscriptions"]],decls:2,vars:0,consts:[[1,"table-container"]],template:function(t,e){1&t&&(s.dc(0,"div",0),s.Yb(1,"subscriptions-table"),s.cc())},directives:[j],styles:[".table-container[_ngcontent-%COMP%]{margin:0 auto;width:100%}"]}),t})()}];let q=(()=>{class t{}return t.\u0275mod=s.Vb({type:t}),t.\u0275inj=s.Ub({factory:function(e){return new(e||t)},imports:[[i.f.forChild(N)],i.f]}),t})(),H=(()=>{class t{}return t.\u0275mod=s.Vb({type:t}),t.\u0275inj=s.Ub({factory:function(e){return new(e||t)},imports:[[o.c,q,u.l,P.e,l.b,a.b,d.c,O.b,m.f,p.i,n.c],u.l,P.e,l.b,P.e,l.b,a.b,d.c,O.b,m.f,p.i]}),t})()}}]);