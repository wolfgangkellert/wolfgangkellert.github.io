function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{ctIF:function(e,t,c){"use strict";c.r(t),c.d(t,"BooksModule",(function(){return Oe}));var n=c("bTqV"),o=c("qFsG"),a=c("SVse"),i=c("iInd"),l=c("bTu8"),r=c("8Y7J"),d=c("M9IT"),s=c("Dh3D"),u=c("+0xr"),b=c("0IaG"),g=c("3Pt+"),m=c("Jgta"),p=c("dNgK"),f=c("NFeN"),h=c("d3UM"),w=["fileInput"];function k(e,t){if(1&e){var c=Object(r.ec)();Object(r.dc)(0,"button",6),Object(r.lc)("click",(function(){return Object(r.Dc)(c),Object(r.pc)().uploadFiles()})),Object(r.Lc)(1),Object(r.cc)()}if(2&e){var n=Object(r.pc)();Object(r.uc)("type",n.uploadButtonType)("disabled",!n.selectedFiles),Object(r.Lb)("aria-label",n.uploadButtonText),Object(r.Kb)(1),Object(r.Nc)(" ",n.uploadButtonText," ")}}function C(e,t){1&e&&(Object(r.dc)(0,"mat-icon"),Object(r.Lc)(1,"close"),Object(r.cc)())}function y(e,t){if(1&e&&Object(r.Yb)(0,"mat-icon",10),2&e){var c=Object(r.pc)(2);Object(r.uc)("svgIcon",c.customSvgIcon)}}function v(e,t){if(1&e){var c=Object(r.ec)();Object(r.dc)(0,"button",7),Object(r.lc)("click",(function(){return Object(r.Dc)(c),Object(r.pc)().filesChanged(null)})),Object(r.Jc)(1,C,2,0,"mat-icon",8),Object(r.Jc)(2,y,1,1,"mat-icon",9),Object(r.cc)()}if(2&e){var n=Object(r.pc)();Object(r.Kb)(1),Object(r.uc)("ngIf",!n.customSvgIcon),Object(r.Kb)(1),Object(r.uc)("ngIf",n.customSvgIcon)}}var O,_,M=((_=function(){function e(){_classCallCheck(this,e),this.labelText="Select File(s)",this.selectButtonText="Select File(s)",this.selectFilesButtonType="button",this.uploadButtonText="Upload File(s)",this.uploadButtonType="button",this.allowMultipleFiles=!1,this.showUploadButton=!0,this.acceptedTypes="*.*",this.customSvgIcon=null,this.uploadClicked=new r.p,this.selectedFilesChanged=new r.p,this.selectedFileText=""}return _createClass(e,[{key:"filesChanged",value:function(e){if(this.selectedFiles=e,this.selectedFilesChanged.emit(this.selectedFiles),this.selectedFiles){var t=this.selectedFiles.length;this.selectedFileText=1===t?this.selectedFiles[0].name:t+" files selected"}else this.selectedFileText="",this.resetFileInput()}},{key:"uploadFiles",value:function(){this.uploadClicked.emit(this.selectedFiles),this.resetFileInput()}},{key:"resetFileInput",value:function(){this.fileInputRef.nativeElement.value=""}}]),e}()).\u0275fac=function(e){return new(e||_)},_.\u0275cmp=Object(r.Rb)({type:_,selectors:[["mat-file-upload"]],viewQuery:function(e,t){var c;1&e&&Object(r.Qc)(w,1),2&e&&Object(r.Ac)(c=Object(r.mc)())&&(t.fileInputRef=c.first)},inputs:{labelText:"labelText",selectButtonText:"selectButtonText",selectFilesButtonType:"selectFilesButtonType",uploadButtonText:"uploadButtonText",uploadButtonType:"uploadButtonType",allowMultipleFiles:"allowMultipleFiles",showUploadButton:"showUploadButton",acceptedTypes:"acceptedTypes",customSvgIcon:"customSvgIcon"},outputs:{uploadClicked:"uploadClicked",selectedFilesChanged:"selectedFilesChanged"},decls:11,vars:9,consts:[[1,"file-input-text"],["mat-button","","color","primary",1,"file-input-button",3,"type","click"],["type","file",2,"display","none",3,"accept","multiple","change"],["fileInput",""],["mat-raised-button","","color","primary","class","file-input-button",3,"type","disabled","click",4,"ngIf"],["mat-icon-button","","type","button","aria-label","Remove Selected File(s)",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"file-input-button",3,"type","disabled","click"],["mat-icon-button","","type","button","aria-label","Remove Selected File(s)",3,"click"],[4,"ngIf"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){if(1&e){var c=Object(r.ec)();Object(r.dc)(0,"span",0),Object(r.Lc)(1),Object(r.cc)(),Object(r.dc)(2,"button",1),Object(r.lc)("click",(function(){return Object(r.Dc)(c),Object(r.Bc)(6).click()})),Object(r.dc)(3,"span"),Object(r.Lc)(4),Object(r.cc)(),Object(r.dc)(5,"input",2,3),Object(r.lc)("change",(function(e){return t.filesChanged(e.target.files)})),Object(r.cc)(),Object(r.cc)(),Object(r.Jc)(7,k,2,4,"button",4),Object(r.dc)(8,"span",0),Object(r.Lc)(9),Object(r.cc)(),Object(r.Jc)(10,v,3,2,"button",5)}2&e&&(Object(r.Kb)(1),Object(r.Mc)(t.labelText),Object(r.Kb)(1),Object(r.uc)("type",t.selectFilesButtonType),Object(r.Lb)("aria-label",t.selectButtonText),Object(r.Kb)(2),Object(r.Mc)(t.selectButtonText),Object(r.Kb)(1),Object(r.uc)("accept",t.acceptedTypes)("multiple",t.allowMultipleFiles),Object(r.Kb)(2),Object(r.uc)("ngIf",t.showUploadButton),Object(r.Kb)(2),Object(r.Mc)(t.selectedFileText),Object(r.Kb)(1),Object(r.uc)("ngIf",null!=t.selectedFiles&&t.selectedFiles.length>0))},directives:[n.b,a.k,f.a],styles:[".file-input-button[_ngcontent-%COMP%] { margin-right: 8px !important }",".file-input-text[_ngcontent-%COMP%] { font-size: 14px !important; margin-right: 8px !important }"]}),_),x=((O=function e(){_classCallCheck(this,e)}).\u0275mod=Object(r.Vb)({type:O}),O.\u0275inj=Object(r.Ub)({factory:function(e){return new(e||O)},imports:[[a.c,n.c,f.b,o.b,h.b,g.i]]}),O),B=c("kmnG"),D=c("FKr1");function j(e,t){if(1&e&&r.Yb(0,"img",21),2&e){var c=r.pc();r.vc("src",c.data.img,r.Ec)}}function I(e,t){1&e&&(r.dc(0,"mat-error"),r.Lc(1," t\xedtulo "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function P(e,t){1&e&&(r.dc(0,"mat-error"),r.Lc(1," descripci\xf3n "),r.dc(2,"strong"),r.Lc(3,"invalida"),r.cc(),r.cc())}function F(e,t){1&e&&(r.dc(0,"mat-error"),r.Lc(1," url de compra "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function L(e,t){1&e&&(r.dc(0,"mat-error"),r.Lc(1," monto "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}var S,T,K=function(e){return{"background-color":e}},E=((T=function(){function e(t,c,n,o){_classCallCheck(this,e),this.cd=t,this._snackBar=c,this.dialogRef=n,this.data=o,this.imgUrl="",this.storage=m.a.storage(),this.storageRef=m.a.storage().ref("books/"),this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.updateArticleForm=new g.g({title:new g.d("",[g.w.required]),description:new g.d("",[g.w.required]),buy_url:new g.d("",[g.w.required]),color:new g.d("",[g.w.required]),img:new g.d("",[g.w.required])})}return _createClass(e,[{key:"ngAfterViewInit",value:function(){}},{key:"updateBook",value:function(){this.dialogRef.close()}},{key:"onSelectedFilesChanged",value:function(e,t){var c=e[0],n=c.slice(0,c.size,"image/png");this.newFile=new File([n],t.id+".png",{type:"image/png"})}},{key:"onUploadClicked",value:function(){var e=this;this.storageRef.child(this.newFile.name).put(this.newFile).then((function(t){e.storageRef.child(e.newFile.name).getDownloadURL().then((function(t){e.data.img=t,e.cd.detectChanges()})),e._snackBar.open("Imagen subida correctamente","Ok",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:e.snackBarHorizontalPosition,verticalPosition:e.snackBarHerticalPosition})}))}},{key:"getImgUrl",value:function(){var e;return this.booksRef.getDownloadURL().then((function(t){console.log(t),e=t})).catch((function(t){console.log(t),e=t})),e}}]),e}()).\u0275fac=function(e){return new(e||T)(r.Xb(r.h),r.Xb(p.b),r.Xb(b.g),r.Xb(b.a))},T.\u0275cmp=r.Rb({type:T,selectors:[["article-editdialog"]],decls:43,vars:22,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"text-align","center"],[1,"mb-3",2,"padding-bottom","10px",3,"ngStyle"],["alt","foto libro","height","200","style","max-width: 250px;",3,"src",4,"ngIf"],[3,"labelText","selectButtonText","uploadButtonText","allowMultipleFiles","acceptedTypes","selectedFilesChanged","uploadClicked"],[1,"update-book-form"],["updateBookForm","ngForm"],[1,"form-field"],["matInput","","name","title","required","",3,"ngModel","ngModelChange"],["title","ngModel"],[4,"ngIf"],["rows","3","matInput","","name","description","required","",3,"ngModel","ngModelChange"],["description","ngModel"],["rows","3","matInput","","name","buy_url","required","",3,"ngModel","ngModelChange"],["buy_url","ngModel"],["name","color","required","","value","data.color",3,"ngModel","ngStyle","ngModelChange"],["color","ngModel"],["value","green",2,"background-color","#DCECDD"],["value","blue",2,"background-color","#D4D7E4"],["mat-dialog-actions",""],["mat-raised-button","","cdkFocusInitial","",3,"mat-dialog-close","disabled"],["alt","foto libro","height","200",2,"max-width","250px",3,"src"]],template:function(e,t){if(1&e&&(r.dc(0,"h1",0),r.Lc(1,"Editar Libro"),r.cc(),r.dc(2,"div",1),r.dc(3,"div",2),r.Jc(4,j,1,1,"img",3),r.Yb(5,"br"),r.dc(6,"mat-file-upload",4),r.lc("selectedFilesChanged",(function(e){return t.onSelectedFilesChanged(e,t.data)}))("uploadClicked",(function(){return t.onUploadClicked()})),r.cc(),r.cc(),r.dc(7,"form",5,6),r.dc(9,"mat-form-field",7),r.dc(10,"mat-label"),r.Lc(11,"T\xedtulo:"),r.cc(),r.dc(12,"input",8,9),r.lc("ngModelChange",(function(e){return t.data.title=e})),r.cc(),r.Jc(14,I,4,0,"mat-error",10),r.cc(),r.Yb(15,"br"),r.dc(16,"mat-form-field",7),r.dc(17,"mat-label"),r.Lc(18,"Descripci\xf3n:"),r.cc(),r.dc(19,"textarea",11,12),r.lc("ngModelChange",(function(e){return t.data.description=e})),r.cc(),r.Jc(21,P,4,0,"mat-error",10),r.cc(),r.Yb(22,"br"),r.dc(23,"mat-form-field",7),r.dc(24,"mat-label"),r.Lc(25,"Url de compra:"),r.cc(),r.dc(26,"textarea",13,14),r.lc("ngModelChange",(function(e){return t.data.buy_url=e})),r.cc(),r.Jc(28,F,4,0,"mat-error",10),r.cc(),r.Yb(29,"br"),r.dc(30,"mat-form-field",7),r.dc(31,"mat-label"),r.Lc(32,"Color de fondo:"),r.cc(),r.dc(33,"mat-select",15,16),r.lc("ngModelChange",(function(e){return t.data.color=e})),r.dc(35,"mat-option",17),r.Lc(36,"Verde "),r.cc(),r.dc(37,"mat-option",18),r.Lc(38,"Azul"),r.cc(),r.cc(),r.Jc(39,L,4,0,"mat-error",10),r.cc(),r.cc(),r.cc(),r.dc(40,"div",19),r.dc(41,"button",20),r.Lc(42,"Guardar"),r.cc(),r.cc()),2&e){var c=r.Bc(8),n=r.Bc(13),o=r.Bc(20),a=r.Bc(27),i=r.Bc(34);r.Kb(3),r.uc("ngStyle",r.yc(18,K,"green"===t.data.color?"#DCECDD":"#D4D7E4")),r.Kb(1),r.uc("ngIf",t.data.img),r.Kb(2),r.uc("labelText","Selecciona una foto para subir (.png).")("selectButtonText","Elegir archivos")("uploadButtonText","Cambiar")("allowMultipleFiles",!1)("acceptedTypes",".png"),r.Kb(6),r.uc("ngModel",t.data.title),r.Kb(2),r.uc("ngIf",!n.valid&&n.touched),r.Kb(5),r.uc("ngModel",t.data.description),r.Kb(2),r.uc("ngIf",!o.valid&&o.touched),r.Kb(5),r.uc("ngModel",t.data.buy_url),r.Kb(2),r.uc("ngIf",!a.valid&&a.touched),r.Kb(5),r.uc("ngModel",t.data.color)("ngStyle",r.yc(20,K,"green"===t.data.color?"#DCECDD":"#D4D7E4")),r.Kb(6),r.uc("ngIf",!i.valid&&i.touched),r.Kb(2),r.uc("mat-dialog-close",t.data)("disabled",c.invalid)}},directives:[b.h,b.e,a.l,a.k,M,g.y,g.p,g.q,B.c,B.g,o.a,g.b,g.u,g.o,g.r,h.a,D.k,b.c,n.b,b.d,B.b],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}.update-book-form[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{width:100%}.form-field[_ngcontent-%COMP%]{width:90%}"],changeDetection:0}),T),R=((S=function(){function e(t,c){_classCallCheck(this,e),this.dialogRef=t,this.data=c}return _createClass(e,[{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"toFloat",value:function(e){return parseFloat(e)}}]),e}()).\u0275fac=function(e){return new(e||S)(r.Xb(b.g),r.Xb(b.a))},S.\u0275cmp=r.Rb({type:S,selectors:[["article-deletedialog"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"width","80%"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",1,"delete-button",3,"mat-dialog-close"],["mat-button","",1,"no-delete-button",3,"click"]],template:function(e,t){1&e&&(r.dc(0,"h1",0),r.Lc(1,"Desea eliminar libro?"),r.cc(),r.Yb(2,"div",1),r.dc(3,"div",2),r.dc(4,"button",3),r.Lc(5,"Si, eliminar"),r.cc(),r.dc(6,"button",4),r.lc("click",(function(){return t.onNoClick()})),r.Lc(7,"No"),r.cc(),r.cc()),2&e&&(r.Kb(4),r.uc("mat-dialog-close",t.data))},directives:[b.h,b.e,b.c,n.b,b.d],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}input[_ngcontent-%COMP%]{width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#c00000;color:#fff}.delete-button[_ngcontent-%COMP%]{background-color:#138535;color:#fff}"]}),S);function J(e,t){if(1&e&&r.Yb(0,"img",23),2&e){var c=r.pc();r.vc("src",c.data.newBook.img,r.Ec)}}function U(e,t){1&e&&(r.dc(0,"span",24),r.Lc(1,"El archivo debe ser formato .png"),r.cc())}function q(e,t){1&e&&(r.dc(0,"mat-error"),r.Lc(1," t\xedtulo "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function z(e,t){1&e&&(r.dc(0,"mat-error"),r.Lc(1," descripci\xf3n "),r.dc(2,"strong"),r.Lc(3,"invalida"),r.cc(),r.cc())}function Y(e,t){1&e&&(r.dc(0,"mat-error"),r.Lc(1," url de compra "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function A(e,t){1&e&&(r.dc(0,"mat-error"),r.Lc(1," monto "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}var X,N,H=function(e){return{"background-color":e}},V=function(e){return{color:e}},$=((X=function(){function e(t,c,n,o){_classCallCheck(this,e),this.cd=t,this._snackBar=c,this.dialogRef=n,this.data=o,this.storage=m.a.storage(),this.storageRef=m.a.storage().ref("books/"),this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.fileAccept=!0,this.updateArticleForm=new g.g({price:new g.d("",[g.w.required]),description:new g.d("",[g.w.required]),jelpi_amount:new g.d("",[g.w.required,g.w.pattern("[[0-9]*.?[0-9]{0,2}")]),company_amount:new g.d("",[g.w.required,g.w.pattern("[0-9]*.?[0-9]{0,2}")])})}return _createClass(e,[{key:"updateArticles",value:function(){this.dialogRef.close()}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onSelectedFilesChanged",value:function(e,t){var c=e[0];"image/png"==c.type?(this.fileAccept=!0,this.blob=c.slice(0,c.size,"image/png")):(this.fileAccept=!1,console.log("type error"))}},{key:"onUploadClicked",value:function(){this.data.newImg=new File([this.blob],"blob.png",{type:"image/png"}),console.log(this.data.newImg)}}]),e}()).\u0275fac=function(e){return new(e||X)(r.Xb(r.h),r.Xb(p.b),r.Xb(b.g),r.Xb(b.a))},X.\u0275cmp=r.Rb({type:X,selectors:[["article-newdialog"]],decls:47,vars:27,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"text-align","center"],[1,"mb-3",2,"padding-bottom","10px",3,"ngStyle"],["alt","foto libro","height","200","style","max-width: 250px;",3,"src",4,"ngIf"],[3,"ngStyle","labelText","selectButtonText","uploadButtonText","allowMultipleFiles","acceptedTypes","showUploadButton","selectedFilesChanged","uploadClicked"],["style","color:red;",4,"ngIf"],[1,"new-book-form"],["newBookForm","ngForm"],[1,"form-field"],["matInput","","name","title","required","",3,"ngModel","ngModelChange"],["title","ngModel"],[4,"ngIf"],["rows","3","matInput","","name","description","required","",3,"ngModel","ngModelChange"],["description","ngModel"],["rows","3","matInput","","name","buy_url","required","",3,"ngModel","ngModelChange"],["buy_url","ngModel"],["name","color","required","","value","data.color",3,"ngModel","ngStyle","ngModelChange"],["color","ngModel"],["value","green",2,"background-color","#DCECDD"],["value","blue",2,"background-color","#D4D7E4"],["mat-dialog-actions",""],["mat-raised-button","",1,"save-button",3,"mat-dialog-close","disabled"],["mat-raised-button","",1,"no-delete-button",3,"click"],["alt","foto libro","height","200",2,"max-width","250px",3,"src"],[2,"color","red"]],template:function(e,t){if(1&e&&(r.dc(0,"h1",0),r.Lc(1,"Nuevo Libro"),r.cc(),r.dc(2,"div",1),r.dc(3,"div",2),r.Jc(4,J,1,1,"img",3),r.Yb(5,"br"),r.dc(6,"mat-file-upload",4),r.lc("selectedFilesChanged",(function(e){return t.onSelectedFilesChanged(e,t.data)}))("uploadClicked",(function(){return t.onUploadClicked()})),r.cc(),r.Yb(7,"br"),r.Jc(8,U,2,0,"span",5),r.cc(),r.dc(9,"form",6,7),r.dc(11,"mat-form-field",8),r.dc(12,"mat-label"),r.Lc(13,"T\xedtulo:"),r.cc(),r.dc(14,"input",9,10),r.lc("ngModelChange",(function(e){return t.data.newBook.title=e})),r.cc(),r.Jc(16,q,4,0,"mat-error",11),r.cc(),r.Yb(17,"br"),r.dc(18,"mat-form-field",8),r.dc(19,"mat-label"),r.Lc(20,"Descripci\xf3n:"),r.cc(),r.dc(21,"textarea",12,13),r.lc("ngModelChange",(function(e){return t.data.newBook.description=e})),r.cc(),r.Jc(23,z,4,0,"mat-error",11),r.cc(),r.Yb(24,"br"),r.dc(25,"mat-form-field",8),r.dc(26,"mat-label"),r.Lc(27,"Url de compra:"),r.cc(),r.dc(28,"textarea",14,15),r.lc("ngModelChange",(function(e){return t.data.newBook.buy_url=e})),r.cc(),r.Jc(30,Y,4,0,"mat-error",11),r.cc(),r.Yb(31,"br"),r.dc(32,"mat-form-field",8),r.dc(33,"mat-label"),r.Lc(34,"Color de fondo:"),r.cc(),r.dc(35,"mat-select",16,17),r.lc("ngModelChange",(function(e){return t.data.newBook.color=e})),r.dc(37,"mat-option",18),r.Lc(38,"Verde "),r.cc(),r.dc(39,"mat-option",19),r.Lc(40,"Azul"),r.cc(),r.cc(),r.Jc(41,A,4,0,"mat-error",11),r.cc(),r.cc(),r.cc(),r.dc(42,"div",20),r.dc(43,"button",21),r.Lc(44,"Guardar"),r.cc(),r.dc(45,"button",22),r.lc("click",(function(){return t.onNoClick()})),r.Lc(46,"Volver"),r.cc(),r.cc()),2&e){var c=r.Bc(10),n=r.Bc(15),o=r.Bc(22),a=r.Bc(29),i=r.Bc(36);r.Kb(3),r.uc("ngStyle",r.yc(21,H,"green"===t.data.newBook.color?"#DCECDD":"#D4D7E4")),r.Kb(1),r.uc("ngIf",t.data.img),r.Kb(2),r.uc("ngStyle",r.yc(23,V,t.fileAccept?"":"red"))("labelText","Selecciona una foto para subir (.png).")("selectButtonText","Elegir archivos")("uploadButtonText","Elegir")("allowMultipleFiles",!1)("acceptedTypes",".png")("showUploadButton",t.fileAccept),r.Kb(2),r.uc("ngIf",!t.fileAccept),r.Kb(6),r.uc("ngModel",t.data.newBook.title),r.Kb(2),r.uc("ngIf",!n.valid&&n.touched),r.Kb(5),r.uc("ngModel",t.data.newBook.description),r.Kb(2),r.uc("ngIf",!o.valid&&o.touched),r.Kb(5),r.uc("ngModel",t.data.newBook.buy_url),r.Kb(2),r.uc("ngIf",!a.valid&&a.touched),r.Kb(5),r.uc("ngModel",t.data.newBook.color)("ngStyle",r.yc(25,H,"green"===t.data.newBook.color?"#DCECDD":"#D4D7E4")),r.Kb(6),r.uc("ngIf",!i.valid&&i.touched),r.Kb(2),r.uc("mat-dialog-close",t.data)("disabled",c.invalid||"foo.png"==t.data.newImg.name)}},directives:[b.h,b.e,a.l,a.k,M,g.y,g.p,g.q,B.c,B.g,o.a,g.b,g.u,g.o,g.r,h.a,D.k,b.c,n.b,b.d,B.b],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}input[_ngcontent-%COMP%]{width:100%;width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#f4c606;color:#fff}.save-button[_ngcontent-%COMP%]{background-color:green;color:#fff}.new-book-form[_ngcontent-%COMP%]{width:100%}.form-field[_ngcontent-%COMP%]{width:90%}"]}),X),G=c("IheW"),Q=c("I/3d"),W=((N=function(){function e(t,c){_classCallCheck(this,e),this._http=t,this.firestore=c,this.subscriptions=c.collection("subscriptions").valueChanges()}return _createClass(e,[{key:"getArticles",value:function(){return this.subscriptions}},{key:"createArticle",value:function(e){return this.firestore.collection("subscriptions").doc().set({name:e.name,lastname:e.lastname,city:e.city,country:e.country,whatsapp:e.whatsapp,email:e.email,time:e.time}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)})),this.subscriptions=this.firestore.collection("subscriptions").valueChanges(),this.subscriptions}},{key:"updateArticle",value:function(e){return this._http.post(this.apiurl+"articles/update/"+e.id,{id:e.id,price:e.price,description:e.description,jelpi_amount:e.jelpi_amount,company_amount:e.company_amount})}},{key:"deleteArticle",value:function(e){return this.firestore.collection("cities").doc("DC").delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})),this._http.delete(this.apiurl+"articles/")}}]),e}()).\u0275fac=function(e){return new(e||N)(r.hc(G.a),r.hc(Q.a))},N.\u0275prov=r.Tb({token:N,factory:N.\u0275fac,providedIn:"root"}),N);function Z(e,t){1&e&&(r.dc(0,"mat-header-cell",23),r.Lc(1," Fecha de creaci\xf3n "),r.cc())}function ee(e,t){if(1&e&&(r.dc(0,"mat-cell"),r.dc(1,"span",24),r.Lc(2,"Fecha de creaci\xf3n:"),r.cc(),r.dc(3,"span",25),r.Lc(4),r.cc(),r.cc()),2&e){var c=t.$implicit,n=r.pc();r.Kb(4),r.Nc(" ",n.getDate(c.timestamp),"")}}function te(e,t){1&e&&(r.dc(0,"mat-header-cell",23),r.Lc(1," T\xedtulo "),r.cc())}function ce(e,t){if(1&e&&(r.dc(0,"mat-cell"),r.dc(1,"span",24),r.Lc(2,"T\xedtulo:"),r.cc(),r.dc(3,"span",25),r.Lc(4),r.cc(),r.cc()),2&e){var c=t.$implicit;r.Kb(4),r.Nc(" ",c.title,"")}}function ne(e,t){1&e&&(r.dc(0,"mat-header-cell",23),r.Lc(1," Descripci\xf3n "),r.cc())}function oe(e,t){if(1&e&&(r.dc(0,"mat-cell"),r.dc(1,"span",24),r.Lc(2,"Descripci\xf3n:"),r.cc(),r.Yb(3,"br"),r.dc(4,"span",26),r.Lc(5),r.cc(),r.cc()),2&e){var c=t.$implicit;r.Kb(5),r.Mc(c.description)}}function ae(e,t){1&e&&(r.dc(0,"mat-header-cell",23),r.Lc(1," Url de compra "),r.cc())}function ie(e,t){if(1&e&&(r.dc(0,"mat-cell",27),r.dc(1,"span",24),r.Lc(2,"Url de compra:"),r.cc(),r.Yb(3,"br"),r.dc(4,"span",26),r.Lc(5),r.cc(),r.cc()),2&e){var c=t.$implicit;r.Kb(5),r.Mc(c.buy_url)}}function le(e,t){1&e&&(r.dc(0,"mat-header-cell",23),r.Lc(1," Imagen "),r.cc())}var re=function(e){return{"background-color":e}};function de(e,t){if(1&e&&(r.dc(0,"mat-cell",28),r.dc(1,"span",24),r.Lc(2,"Imagen:"),r.cc(),r.Yb(3,"img",29),r.cc()),2&e){var c=t.$implicit;r.uc("ngStyle",r.yc(2,re,"green"===c.color?"#DCECDD":"#D4D7E4")),r.Kb(3),r.vc("src",c.img,r.Ec)}}function se(e,t){if(1&e){var c=r.ec();r.dc(0,"mat-header-cell",30),r.dc(1,"button",5),r.lc("click",(function(){return r.Dc(c),r.pc().openNewDialog()})),r.dc(2,"mat-icon"),r.Lc(3,"add_circle"),r.cc(),r.cc(),r.cc()}}function ue(e,t){if(1&e){var c=r.ec();r.dc(0,"mat-cell",31),r.dc(1,"button",32),r.lc("click",(function(){r.Dc(c);var e=t.$implicit;return r.pc().openUpdateDialog(e)})),r.dc(2,"mat-icon"),r.Lc(3,"edit"),r.cc(),r.cc(),r.dc(4,"button",33),r.lc("click",(function(){r.Dc(c);var e=t.$implicit;return r.pc().openDeleteDialog(e)})),r.dc(5,"mat-icon"),r.Lc(6,"delete"),r.cc(),r.cc(),r.cc()}}function be(e,t){1&e&&r.Yb(0,"mat-header-row")}function ge(e,t){1&e&&r.Yb(0,"mat-row")}var me,pe,fe,he,we=function(){return[5,10,25,100]},ke=[],Ce=((me=function(){function e(t,c,n,o,a,i,l,r,d){_classCallCheck(this,e),this.cd=t,this._route=c,this._router=n,this._bookService=o,this._snackBar=a,this._httpClient=i,this._token=l,this._dialog=r,this.firestore=d,this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.displayedColumns=["timestamp","title","description","buy_url","img","action"],this.storageRef=m.a.storage().ref("books/"),this.message="",this.error="",this.mobile=!1,this.books=d.collection("books").get(),this.booksCollection=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;360===window.screen.width&&(this.mobile=!0),this.books.subscribe((function(t){t.forEach((function(t){e.booksCollection.push(t.data())})),(ke=e.booksCollection).sort((function(e,t){return e.timestamp<t.timestamp?1:t.timestamp<e.timestamp?-1:0})),e.dataSource=new u.k(ke),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort}))}},{key:"openNewDialog",value:function(){var e=this,t={id:"",buy_url:"",description:"",img:"",color:"",title:"",timestamp:new Date},c=new File(["foo"],"foo.png",{type:"image/png"});this._dialog.open($,{width:"550px",data:{newBook:t,newImg:c},disableClose:!0}).afterClosed().subscribe((function(t){null!=t&&e.firestore.collection("books").add(t.newBook).then((function(c){t.newBook.id=c.id;var n=t.newImg.slice(0,t.newImg.size,"image/png");t.newImg=new File([n],t.newBook.id+".png",{type:"image/png"}),e.storageRef.child(t.newImg.name).put(t.newImg).then((function(c){e.storageRef.child(t.newImg.name).getDownloadURL().then((function(c){t.newBook.img=c,e.cd.detectChanges(),e.firestore.collection("books").doc(t.newBook.id).set({id:t.newBook.id,img:t.newBook.img},{merge:!0})}))})),ke.unshift(t.newBook),ke=ke.sort((function(e,t){return e.timestamp<t.timestamp?1:t.timestamp<e.timestamp?-1:0})),e.dataSource=new u.k(ke),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort,e.showSnackBar("Libro guardado correctamente","success-snackbar",3)})).catch((function(t){e.showSnackBar("Error al guardar el libro.","warning-snackbar",3),console.error("Error writing document: ",t)}))}))}},{key:"openUpdateDialog",value:function(e){var t=this,c=Object.assign({},e);this._dialog.open(E,{width:"550px",data:c,disableClose:!0}).afterClosed().subscribe((function(e){null!=e&&t.firestore.collection("books").doc(e.id).set(e).then((function(){ke=ke.map((function(t){return t.id===e.id?e:t})),t.dataSource=new u.k(ke),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort,t.showSnackBar("Libro guardado correctamente","success-snackbar",3)})).catch((function(e){t.showSnackBar("Error al guardar el libro.","warning-snackbar",3),console.error("Error writing document: ",e)}))}))}},{key:"openDeleteDialog",value:function(e){var t=this,c=Object.assign({},e);this._dialog.open(R,{width:"350px",data:c,disableClose:!0}).afterClosed().subscribe((function(c){null!=c&&t.firestore.collection("books").doc(c.id).delete().then((function(){t.storageRef.child(c.id+".png").delete().then((function(){ke.splice(ke.indexOf(e),1),t.dataSource=new u.k(ke),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort,t.showSnackBar("Libro borrardo correctamente","success-snackbar",3)})).catch((function(e){t.showSnackBar("Error al borrar la imagen del libro","warning-snackbar",3),console.log("Error deleting image from storage",e)}))})).catch((function(e){t.showSnackBar("Error al borrar el libro","warning-snackbar",3),console.log("Error deleting book from firestore",e)}))}))}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"showSnackBar",value:function(e,t,c){this._snackBar.open(e,"Ok",{duration:1e3*c,panelClass:[t],horizontalPosition:this.snackBarHorizontalPosition,verticalPosition:this.snackBarHerticalPosition})}},{key:"sendWhatsapp",value:function(e){window.open("https://api.whatsapp.com/send?phone="+e.countryCode+e.whatsapp,"_blank")}},{key:"sendMail",value:function(e){window.open("https://mail.google.com/mail/?view=cm&fs=1&to="+e.email,"_blank")}},{key:"getDate",value:function(e){console.log(e);var t=new Date(1e3*e);return console.log(t),t.getDate()+"/"+(t.getMonth()+1)}}]),e}()).\u0275fac=function(e){return new(e||me)(r.Xb(r.h),r.Xb(i.a),r.Xb(i.c),r.Xb(W),r.Xb(p.b),r.Xb(G.a),r.Xb(G.a),r.Xb(b.b),r.Xb(Q.a))},me.\u0275cmp=r.Rb({type:me,selectors:[["books-table"]],viewQuery:function(e,t){var c;1&e&&(r.Qc(d.a,!0),r.Qc(s.a,!0)),2&e&&(r.Ac(c=r.mc())&&(t.paginator=c.first),r.Ac(c=r.mc())&&(t.sort=c.first))},decls:36,vars:5,consts:[[1,"search-container","d-flex","justify-content-between"],["matInput","","placeholder","...",3,"keyup"],["searchInput",""],["matSuffix",""],[1,"display-mobile","ml-4"],["mat-mini-fab","","aria-label","hidden","color","danger",1,"new-button",3,"click"],[1,"table-container"],["matSort","",1,"mat-elevation-z8",3,"dataSource","dataSourceChange"],["matColumnDef","timestamp"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","buy_url",1,"email-row"],["class","email-row",4,"matCellDef"],["matColumnDef","img",1,"email-row"],["class","email-row",3,"ngStyle",4,"matCellDef"],["matColumnDef","action"],["class","actions-header",4,"matHeaderCellDef"],["class","actions-cell",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],[1,"display-mobile"],[2,"text-align","left"],[2,"text-align","left","max-width","97%"],[1,"email-row"],[1,"email-row",3,"ngStyle"],["alt","",2,"max-height","150px","max-width","75%","width","auto","; margin","0 auto",3,"src"],[1,"actions-header"],[1,"actions-cell"],["mat-mini-fab","","aria-label","hidden","color","primary",1,"edit-button",3,"click"],["mat-mini-fab","","aria-label","hidden","color","danger",1,"delete-button",3,"click"]],template:function(e,t){1&e&&(r.dc(0,"div",0),r.dc(1,"div"),r.dc(2,"mat-form-field"),r.dc(3,"mat-label"),r.Lc(4,"Buscar"),r.cc(),r.dc(5,"input",1,2),r.lc("keyup",(function(e){return t.applyFilter(e)})),r.cc(),r.dc(7,"mat-icon",3),r.Lc(8,"search"),r.cc(),r.cc(),r.cc(),r.dc(9,"div",4),r.dc(10,"button",5),r.lc("click",(function(){return t.openNewDialog()})),r.dc(11,"mat-icon"),r.Lc(12,"add_circle"),r.cc(),r.cc(),r.cc(),r.cc(),r.dc(13,"div",6),r.dc(14,"mat-table",7),r.lc("dataSourceChange",(function(e){return t.dataSource=e})),r.bc(15,8),r.Jc(16,Z,2,0,"mat-header-cell",9),r.Jc(17,ee,5,1,"mat-cell",10),r.ac(),r.bc(18,11),r.Jc(19,te,2,0,"mat-header-cell",9),r.Jc(20,ce,5,1,"mat-cell",10),r.ac(),r.bc(21,12),r.Jc(22,ne,2,0,"mat-header-cell",9),r.Jc(23,oe,6,1,"mat-cell",10),r.ac(),r.bc(24,13),r.Jc(25,ae,2,0,"mat-header-cell",9),r.Jc(26,ie,6,1,"mat-cell",14),r.ac(),r.bc(27,15),r.Jc(28,le,2,0,"mat-header-cell",9),r.Jc(29,de,4,4,"mat-cell",16),r.ac(),r.bc(30,17),r.Jc(31,se,4,0,"mat-header-cell",18),r.Jc(32,ue,7,0,"mat-cell",19),r.ac(),r.Jc(33,be,1,0,"mat-header-row",20),r.Jc(34,ge,1,0,"mat-row",21),r.cc(),r.Yb(35,"mat-paginator",22),r.cc()),2&e&&(r.Kb(14),r.uc("dataSource",t.dataSource),r.Kb(19),r.uc("matHeaderRowDef",t.displayedColumns),r.Kb(1),r.uc("matRowDefColumns",t.displayedColumns),r.Kb(1),r.uc("pageSizeOptions",r.xc(4,we)))},directives:[B.c,B.g,o.a,f.a,B.h,n.b,u.j,s.a,u.c,u.e,u.b,u.g,u.i,d.a,u.d,s.b,u.a,a.l,u.f,u.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.display-mobile[_ngcontent-%COMP%]{display:none}mat-header-cell[_ngcontent-%COMP%]{color:#fff;background-color:#263978;text-align:center;font-weight:bolder;font-size:12px}.search-container[_ngcontent-%COMP%]{margin-top:35px;width:250px}.edit-button[_ngcontent-%COMP%]{box-shadow:0 4px 4px #999;background-color:#f4c606}.delete-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;box-shadow:0 4px 4px #999;background-color:red}.new-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;background-color:green}.actions-cell[_ngcontent-%COMP%], .actions-header[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width:960px){.mat-header-cell[_ngcontent-%COMP%]{font-size:9px}.display-mobile[_ngcontent-%COMP%]{display:block;margin-right:10px;font-weight:bolder}mat-cell[_ngcontent-%COMP%]{text-align:center;margin:0;padding-right:0}mat-cell[_ngcontent-%COMP%]   .display-mobile[_ngcontent-%COMP%]{display:block;margin-right:10px;font-weight:bolder}}@media (min-width:960px){.mat-column-email[_ngcontent-%COMP%]{flex:0 0 28%!important;width:28%!important}.mat-column-country[_ngcontent-%COMP%], .mat-column-email[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-country[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}}  .mat-focused .mat-form-field-label{color:#263978!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:#263978!important}@media screen and (max-width:960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{border:10px solid;clip:rect(0 0 0 0);height:1px;margin:-1px;padding:0;position:absolute;width:1px}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding-left:20px}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.75em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}}"],changeDetection:0}),me),ye=[{path:"",component:(pe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.mySwiper=new l.a(".swiper-container")}}]),e}(),pe.\u0275fac=function(e){return new(e||pe)},pe.\u0275cmp=r.Rb({type:pe,selectors:[["app-books"]],decls:2,vars:0,consts:[[1,"table-container"]],template:function(e,t){1&e&&(r.dc(0,"div",0),r.Yb(1,"books-table"),r.cc())},directives:[Ce],styles:[".table-container[_ngcontent-%COMP%]{margin:0 auto;width:100%}"]}),pe)}],ve=((he=function e(){_classCallCheck(this,e)}).\u0275mod=r.Vb({type:he}),he.\u0275inj=r.Ub({factory:function(e){return new(e||he)},imports:[[i.f.forChild(ye)],i.f]}),he),Oe=((fe=function e(){_classCallCheck(this,e)}).\u0275mod=r.Vb({type:fe}),fe.\u0275inj=r.Ub({factory:function(e){return new(e||fe)},imports:[[a.c,ve,u.l,B.e,d.b,o.b,s.c,f.b,b.f,g.i,n.c,h.b,x],u.l,B.e,d.b,B.e,d.b,o.b,s.c,f.b,b.f,g.i,x]}),fe)}}]);