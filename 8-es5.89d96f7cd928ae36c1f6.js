function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,c){return e&&_defineProperties(t.prototype,e),c&&_defineProperties(t,c),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{ctIF:function(t,e,c){"use strict";c.r(e),c.d(e,"BooksModule",(function(){return kt}));var n=c("bTqV"),o=c("qFsG"),a=c("SVse"),i=c("iInd"),l=c("bTu8"),r=c("8Y7J"),d=c("M9IT"),s=c("Dh3D"),u=c("+0xr"),b=c("0IaG"),g=c("3Pt+"),m=c("Jgta"),p=c("dNgK"),f=c("NFeN"),h=c("d3UM"),w=["fileInput"];function k(t,e){if(1&t){var c=Object(r.ec)();Object(r.dc)(0,"button",6),Object(r.lc)("click",(function(){return Object(r.Dc)(c),Object(r.pc)().uploadFiles()})),Object(r.Lc)(1),Object(r.cc)()}if(2&t){var n=Object(r.pc)();Object(r.uc)("type",n.uploadButtonType)("disabled",!n.selectedFiles),Object(r.Lb)("aria-label",n.uploadButtonText),Object(r.Kb)(1),Object(r.Nc)(" ",n.uploadButtonText," ")}}function C(t,e){1&t&&(Object(r.dc)(0,"mat-icon"),Object(r.Lc)(1,"close"),Object(r.cc)())}function v(t,e){if(1&t&&Object(r.Yb)(0,"mat-icon",10),2&t){var c=Object(r.pc)(2);Object(r.uc)("svgIcon",c.customSvgIcon)}}function y(t,e){if(1&t){var c=Object(r.ec)();Object(r.dc)(0,"button",7),Object(r.lc)("click",(function(){return Object(r.Dc)(c),Object(r.pc)().filesChanged(null)})),Object(r.Jc)(1,C,2,0,"mat-icon",8),Object(r.Jc)(2,v,1,1,"mat-icon",9),Object(r.cc)()}if(2&t){var n=Object(r.pc)();Object(r.Kb)(1),Object(r.uc)("ngIf",!n.customSvgIcon),Object(r.Kb)(1),Object(r.uc)("ngIf",n.customSvgIcon)}}var O,_,M=((_=function(){function t(){_classCallCheck(this,t),this.labelText="Select File(s)",this.selectButtonText="Select File(s)",this.selectFilesButtonType="button",this.uploadButtonText="Upload File(s)",this.uploadButtonType="button",this.allowMultipleFiles=!1,this.showUploadButton=!0,this.acceptedTypes="*.*",this.customSvgIcon=null,this.uploadClicked=new r.p,this.selectedFilesChanged=new r.p,this.selectedFileText=""}return _createClass(t,[{key:"filesChanged",value:function(t){if(this.selectedFiles=t,this.selectedFilesChanged.emit(this.selectedFiles),this.selectedFiles){var e=this.selectedFiles.length;this.selectedFileText=1===e?this.selectedFiles[0].name:e+" files selected"}else this.selectedFileText="",this.resetFileInput()}},{key:"uploadFiles",value:function(){this.uploadClicked.emit(this.selectedFiles),this.resetFileInput()}},{key:"resetFileInput",value:function(){this.fileInputRef.nativeElement.value=""}}]),t}()).\u0275fac=function(t){return new(t||_)},_.\u0275cmp=Object(r.Rb)({type:_,selectors:[["mat-file-upload"]],viewQuery:function(t,e){var c;1&t&&Object(r.Qc)(w,1),2&t&&Object(r.Ac)(c=Object(r.mc)())&&(e.fileInputRef=c.first)},inputs:{labelText:"labelText",selectButtonText:"selectButtonText",selectFilesButtonType:"selectFilesButtonType",uploadButtonText:"uploadButtonText",uploadButtonType:"uploadButtonType",allowMultipleFiles:"allowMultipleFiles",showUploadButton:"showUploadButton",acceptedTypes:"acceptedTypes",customSvgIcon:"customSvgIcon"},outputs:{uploadClicked:"uploadClicked",selectedFilesChanged:"selectedFilesChanged"},decls:11,vars:9,consts:[[1,"file-input-text"],["mat-button","","color","primary",1,"file-input-button",3,"type","click"],["type","file",2,"display","none",3,"accept","multiple","change"],["fileInput",""],["mat-raised-button","","color","primary","class","file-input-button",3,"type","disabled","click",4,"ngIf"],["mat-icon-button","","type","button","aria-label","Remove Selected File(s)",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"file-input-button",3,"type","disabled","click"],["mat-icon-button","","type","button","aria-label","Remove Selected File(s)",3,"click"],[4,"ngIf"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(t,e){if(1&t){var c=Object(r.ec)();Object(r.dc)(0,"span",0),Object(r.Lc)(1),Object(r.cc)(),Object(r.dc)(2,"button",1),Object(r.lc)("click",(function(){return Object(r.Dc)(c),Object(r.Bc)(6).click()})),Object(r.dc)(3,"span"),Object(r.Lc)(4),Object(r.cc)(),Object(r.dc)(5,"input",2,3),Object(r.lc)("change",(function(t){return e.filesChanged(t.target.files)})),Object(r.cc)(),Object(r.cc)(),Object(r.Jc)(7,k,2,4,"button",4),Object(r.dc)(8,"span",0),Object(r.Lc)(9),Object(r.cc)(),Object(r.Jc)(10,y,3,2,"button",5)}2&t&&(Object(r.Kb)(1),Object(r.Mc)(e.labelText),Object(r.Kb)(1),Object(r.uc)("type",e.selectFilesButtonType),Object(r.Lb)("aria-label",e.selectButtonText),Object(r.Kb)(2),Object(r.Mc)(e.selectButtonText),Object(r.Kb)(1),Object(r.uc)("accept",e.acceptedTypes)("multiple",e.allowMultipleFiles),Object(r.Kb)(2),Object(r.uc)("ngIf",e.showUploadButton),Object(r.Kb)(2),Object(r.Mc)(e.selectedFileText),Object(r.Kb)(1),Object(r.uc)("ngIf",null!=e.selectedFiles&&e.selectedFiles.length>0))},directives:[n.b,a.k,f.a],styles:[".file-input-button[_ngcontent-%COMP%] { margin-right: 8px !important }",".file-input-text[_ngcontent-%COMP%] { font-size: 14px !important; margin-right: 8px !important }"]}),_),x=((O=function t(){_classCallCheck(this,t)}).\u0275mod=Object(r.Vb)({type:O}),O.\u0275inj=Object(r.Ub)({factory:function(t){return new(t||O)},imports:[[a.c,n.c,f.b,o.b,h.b,g.i]]}),O),B=c("kmnG"),D=c("FKr1");function j(t,e){if(1&t&&r.Yb(0,"img",21),2&t){var c=r.pc();r.vc("src",c.data.img,r.Ec)}}function P(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," t\xedtulo "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function I(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," descripci\xf3n "),r.dc(2,"strong"),r.Lc(3,"invalida"),r.cc(),r.cc())}function F(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," url de compra "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function L(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," monto "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}var S,T,K=function(t){return{"background-color":t}},R=((T=function(){function t(e,c,n,o){_classCallCheck(this,t),this.cd=e,this._snackBar=c,this.dialogRef=n,this.data=o,this.imgUrl="",this.storage=m.a.storage(),this.storageRef=m.a.storage().ref("books/"),this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.updateArticleForm=new g.g({title:new g.d("",[g.w.required]),description:new g.d("",[g.w.required]),buy_url:new g.d("",[g.w.required]),color:new g.d("",[g.w.required]),img:new g.d("",[g.w.required])})}return _createClass(t,[{key:"ngAfterViewInit",value:function(){}},{key:"updateBook",value:function(){this.dialogRef.close()}},{key:"onSelectedFilesChanged",value:function(t,e){var c=t[0],n=c.slice(0,c.size,"image/png");this.newFile=new File([n],e.id+".png",{type:"image/png"})}},{key:"onUploadClicked",value:function(){var t=this;this.storageRef.child(this.newFile.name).put(this.newFile).then((function(e){t.storageRef.child(t.newFile.name).getDownloadURL().then((function(e){t.data.img=e,t.cd.detectChanges()})),t._snackBar.open("Imagen subida correctamente","Ok",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:t.snackBarHorizontalPosition,verticalPosition:t.snackBarHerticalPosition})}))}},{key:"getImgUrl",value:function(){var t;return this.booksRef.getDownloadURL().then((function(e){console.log(e),t=e})).catch((function(e){console.log(e),t=e})),t}}]),t}()).\u0275fac=function(t){return new(t||T)(r.Xb(r.h),r.Xb(p.b),r.Xb(b.g),r.Xb(b.a))},T.\u0275cmp=r.Rb({type:T,selectors:[["article-editdialog"]],decls:43,vars:22,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"text-align","center"],[1,"mb-3",2,"padding-bottom","10px",3,"ngStyle"],["alt","foto libro","height","200","style","max-width: 250px;",3,"src",4,"ngIf"],[3,"labelText","selectButtonText","uploadButtonText","allowMultipleFiles","acceptedTypes","selectedFilesChanged","uploadClicked"],[1,"update-book-form"],["updateBookForm","ngForm"],[1,"form-field"],["matInput","","name","title","required","",3,"ngModel","ngModelChange"],["title","ngModel"],[4,"ngIf"],["rows","3","matInput","","name","description","required","",3,"ngModel","ngModelChange"],["description","ngModel"],["rows","3","matInput","","name","buy_url","required","",3,"ngModel","ngModelChange"],["buy_url","ngModel"],["name","color","required","","value","data.color",3,"ngModel","ngStyle","ngModelChange"],["color","ngModel"],["value","green",2,"background-color","#DCECDD"],["value","blue",2,"background-color","#D4D7E4"],["mat-dialog-actions",""],["mat-raised-button","","cdkFocusInitial","",3,"mat-dialog-close","disabled"],["alt","foto libro","height","200",2,"max-width","250px",3,"src"]],template:function(t,e){if(1&t&&(r.dc(0,"h1",0),r.Lc(1,"Editar Libro"),r.cc(),r.dc(2,"div",1),r.dc(3,"div",2),r.Jc(4,j,1,1,"img",3),r.Yb(5,"br"),r.dc(6,"mat-file-upload",4),r.lc("selectedFilesChanged",(function(t){return e.onSelectedFilesChanged(t,e.data)}))("uploadClicked",(function(){return e.onUploadClicked()})),r.cc(),r.cc(),r.dc(7,"form",5,6),r.dc(9,"mat-form-field",7),r.dc(10,"mat-label"),r.Lc(11,"T\xedtulo:"),r.cc(),r.dc(12,"input",8,9),r.lc("ngModelChange",(function(t){return e.data.title=t})),r.cc(),r.Jc(14,P,4,0,"mat-error",10),r.cc(),r.Yb(15,"br"),r.dc(16,"mat-form-field",7),r.dc(17,"mat-label"),r.Lc(18,"Descripci\xf3n:"),r.cc(),r.dc(19,"textarea",11,12),r.lc("ngModelChange",(function(t){return e.data.description=t})),r.cc(),r.Jc(21,I,4,0,"mat-error",10),r.cc(),r.Yb(22,"br"),r.dc(23,"mat-form-field",7),r.dc(24,"mat-label"),r.Lc(25,"Url de compra:"),r.cc(),r.dc(26,"textarea",13,14),r.lc("ngModelChange",(function(t){return e.data.buy_url=t})),r.cc(),r.Jc(28,F,4,0,"mat-error",10),r.cc(),r.Yb(29,"br"),r.dc(30,"mat-form-field",7),r.dc(31,"mat-label"),r.Lc(32,"Color de fondo:"),r.cc(),r.dc(33,"mat-select",15,16),r.lc("ngModelChange",(function(t){return e.data.color=t})),r.dc(35,"mat-option",17),r.Lc(36,"Verde "),r.cc(),r.dc(37,"mat-option",18),r.Lc(38,"Azul"),r.cc(),r.cc(),r.Jc(39,L,4,0,"mat-error",10),r.cc(),r.cc(),r.cc(),r.dc(40,"div",19),r.dc(41,"button",20),r.Lc(42,"Guardar"),r.cc(),r.cc()),2&t){var c=r.Bc(8),n=r.Bc(13),o=r.Bc(20),a=r.Bc(27),i=r.Bc(34);r.Kb(3),r.uc("ngStyle",r.yc(18,K,"green"===e.data.color?"#DCECDD":"#D4D7E4")),r.Kb(1),r.uc("ngIf",e.data.img),r.Kb(2),r.uc("labelText","Selecciona una foto para subir (.png).")("selectButtonText","Elegir archivos")("uploadButtonText","Cambiar")("allowMultipleFiles",!1)("acceptedTypes",".png"),r.Kb(6),r.uc("ngModel",e.data.title),r.Kb(2),r.uc("ngIf",!n.valid&&n.touched),r.Kb(5),r.uc("ngModel",e.data.description),r.Kb(2),r.uc("ngIf",!o.valid&&o.touched),r.Kb(5),r.uc("ngModel",e.data.buy_url),r.Kb(2),r.uc("ngIf",!a.valid&&a.touched),r.Kb(5),r.uc("ngModel",e.data.color)("ngStyle",r.yc(20,K,"green"===e.data.color?"#DCECDD":"#D4D7E4")),r.Kb(6),r.uc("ngIf",!i.valid&&i.touched),r.Kb(2),r.uc("mat-dialog-close",e.data)("disabled",c.invalid)}},directives:[b.h,b.e,a.l,a.k,M,g.y,g.p,g.q,B.c,B.g,o.a,g.b,g.u,g.o,g.r,h.a,D.k,b.c,n.b,b.d,B.b],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}.update-book-form[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{width:100%}.form-field[_ngcontent-%COMP%]{width:90%}"],changeDetection:0}),T),E=((S=function(){function t(e,c){_classCallCheck(this,t),this.dialogRef=e,this.data=c}return _createClass(t,[{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"toFloat",value:function(t){return parseFloat(t)}}]),t}()).\u0275fac=function(t){return new(t||S)(r.Xb(b.g),r.Xb(b.a))},S.\u0275cmp=r.Rb({type:S,selectors:[["article-deletedialog"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"width","80%"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",1,"delete-button",3,"mat-dialog-close"],["mat-button","",1,"no-delete-button",3,"click"]],template:function(t,e){1&t&&(r.dc(0,"h1",0),r.Lc(1,"Desea eliminar articulo?"),r.cc(),r.Yb(2,"div",1),r.dc(3,"div",2),r.dc(4,"button",3),r.Lc(5,"Si, eliminar"),r.cc(),r.dc(6,"button",4),r.lc("click",(function(){return e.onNoClick()})),r.Lc(7,"No"),r.cc(),r.cc()),2&t&&(r.Kb(4),r.uc("mat-dialog-close",e.data))},directives:[b.h,b.e,b.c,n.b,b.d],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}.right[_ngcontent-%COMP%]{float:right}input[_ngcontent-%COMP%]{width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#c00000;color:#fff}.delete-button[_ngcontent-%COMP%]{background-color:#138535;color:#fff}"]}),S);function J(t,e){if(1&t&&r.Yb(0,"img",22),2&t){var c=r.pc();r.vc("src",c.data.newBook.img,r.Ec)}}function U(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," t\xedtulo "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function z(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," descripci\xf3n "),r.dc(2,"strong"),r.Lc(3,"invalida"),r.cc(),r.cc())}function q(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," url de compra "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}function Y(t,e){1&t&&(r.dc(0,"mat-error"),r.Lc(1," monto "),r.dc(2,"strong"),r.Lc(3,"invalido"),r.cc(),r.cc())}var X,H,A=function(t){return{"background-color":t}},N=((X=function(){function t(e,c,n,o){_classCallCheck(this,t),this.cd=e,this._snackBar=c,this.dialogRef=n,this.data=o,this.storage=m.a.storage(),this.storageRef=m.a.storage().ref("books/"),this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.updateArticleForm=new g.g({price:new g.d("",[g.w.required]),description:new g.d("",[g.w.required]),jelpi_amount:new g.d("",[g.w.required,g.w.pattern("[[0-9]*.?[0-9]{0,2}")]),company_amount:new g.d("",[g.w.required,g.w.pattern("[0-9]*.?[0-9]{0,2}")])})}return _createClass(t,[{key:"updateArticles",value:function(){this.dialogRef.close()}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onSelectedFilesChanged",value:function(t,e){var c=t[0],n=c.slice(0,c.size,"image/png");this.data.newImg=new File([n],"blob.png",{type:"image/png"})}},{key:"onUploadClicked",value:function(){var t=this;console.log(this.newFile),console.log(this.data),this.storageRef.child(this.newFile.name).put(this.newFile).then((function(e){t.storageRef.child(t.newFile.name).getDownloadURL().then((function(e){t.data.img=e,t.cd.detectChanges()})),t._snackBar.open("Imagen subida correctamente","Ok",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:t.snackBarHorizontalPosition,verticalPosition:t.snackBarHerticalPosition})}))}}]),t}()).\u0275fac=function(t){return new(t||X)(r.Xb(r.h),r.Xb(p.b),r.Xb(b.g),r.Xb(b.a))},X.\u0275cmp=r.Rb({type:X,selectors:[["article-newdialog"]],decls:45,vars:22,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"text-align","center"],[1,"mb-3",2,"padding-bottom","10px",3,"ngStyle"],["alt","foto libro","height","200","style","max-width: 250px;",3,"src",4,"ngIf"],["required","",3,"labelText","selectButtonText","uploadButtonText","allowMultipleFiles","acceptedTypes","selectedFilesChanged"],[1,"new-book-form"],["newBookForm","ngForm"],[1,"form-field"],["matInput","","name","title","required","",3,"ngModel","ngModelChange"],["title","ngModel"],[4,"ngIf"],["rows","3","matInput","","name","description","required","",3,"ngModel","ngModelChange"],["description","ngModel"],["rows","3","matInput","","name","buy_url","required","",3,"ngModel","ngModelChange"],["buy_url","ngModel"],["name","color","required","","value","data.color",3,"ngModel","ngStyle","ngModelChange"],["color","ngModel"],["value","green",2,"background-color","#DCECDD"],["value","blue",2,"background-color","#D4D7E4"],["mat-dialog-actions",""],["mat-raised-button","",1,"save-button",3,"mat-dialog-close","disabled"],["mat-raised-button","",1,"no-delete-button",3,"click"],["alt","foto libro","height","200",2,"max-width","250px",3,"src"]],template:function(t,e){if(1&t&&(r.dc(0,"h1",0),r.Lc(1,"Nuevo Libro"),r.cc(),r.dc(2,"div",1),r.dc(3,"div",2),r.Jc(4,J,1,1,"img",3),r.Yb(5,"br"),r.dc(6,"mat-file-upload",4),r.lc("selectedFilesChanged",(function(t){return e.onSelectedFilesChanged(t,e.data)})),r.cc(),r.cc(),r.dc(7,"form",5,6),r.dc(9,"mat-form-field",7),r.dc(10,"mat-label"),r.Lc(11,"T\xedtulo:"),r.cc(),r.dc(12,"input",8,9),r.lc("ngModelChange",(function(t){return e.data.newBook.title=t})),r.cc(),r.Jc(14,U,4,0,"mat-error",10),r.cc(),r.Yb(15,"br"),r.dc(16,"mat-form-field",7),r.dc(17,"mat-label"),r.Lc(18,"Descripci\xf3n:"),r.cc(),r.dc(19,"textarea",11,12),r.lc("ngModelChange",(function(t){return e.data.newBook.description=t})),r.cc(),r.Jc(21,z,4,0,"mat-error",10),r.cc(),r.Yb(22,"br"),r.dc(23,"mat-form-field",7),r.dc(24,"mat-label"),r.Lc(25,"Url de compra:"),r.cc(),r.dc(26,"textarea",13,14),r.lc("ngModelChange",(function(t){return e.data.newBook.buy_url=t})),r.cc(),r.Jc(28,q,4,0,"mat-error",10),r.cc(),r.Yb(29,"br"),r.dc(30,"mat-form-field",7),r.dc(31,"mat-label"),r.Lc(32,"Color de fondo:"),r.cc(),r.dc(33,"mat-select",15,16),r.lc("ngModelChange",(function(t){return e.data.newBook.color=t})),r.dc(35,"mat-option",17),r.Lc(36,"Verde "),r.cc(),r.dc(37,"mat-option",18),r.Lc(38,"Azul"),r.cc(),r.cc(),r.Jc(39,Y,4,0,"mat-error",10),r.cc(),r.cc(),r.cc(),r.dc(40,"div",19),r.dc(41,"button",20),r.Lc(42,"Guardar"),r.cc(),r.dc(43,"button",21),r.lc("click",(function(){return e.onNoClick()})),r.Lc(44,"Volver"),r.cc(),r.cc()),2&t){var c=r.Bc(8),n=r.Bc(13),o=r.Bc(20),a=r.Bc(27),i=r.Bc(34);r.Kb(3),r.uc("ngStyle",r.yc(18,A,"green"===e.data.newBook.color?"#DCECDD":"#D4D7E4")),r.Kb(1),r.uc("ngIf",e.data.img),r.Kb(2),r.uc("labelText","Selecciona una foto para subir (.png).")("selectButtonText","Elegir archivos")("uploadButtonText","Cambiar")("allowMultipleFiles",!1)("acceptedTypes",".png"),r.Kb(6),r.uc("ngModel",e.data.newBook.title),r.Kb(2),r.uc("ngIf",!n.valid&&n.touched),r.Kb(5),r.uc("ngModel",e.data.newBook.description),r.Kb(2),r.uc("ngIf",!o.valid&&o.touched),r.Kb(5),r.uc("ngModel",e.data.newBook.buy_url),r.Kb(2),r.uc("ngIf",!a.valid&&a.touched),r.Kb(5),r.uc("ngModel",e.data.newBook.color)("ngStyle",r.yc(20,A,"green"===e.data.newBook.color?"#DCECDD":"#D4D7E4")),r.Kb(6),r.uc("ngIf",!i.valid&&i.touched),r.Kb(2),r.uc("mat-dialog-close",e.data)("disabled",c.invalid||"foo.png"==e.data.newImg.name)}},directives:[b.h,b.e,a.l,a.k,M,g.y,g.p,g.q,B.c,B.g,o.a,g.b,g.u,g.o,g.r,h.a,D.k,b.c,n.b,b.d,B.b],styles:["span[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.left[_ngcontent-%COMP%]{float:left}input[_ngcontent-%COMP%]{width:100%;width:80%}.no-delete-button[_ngcontent-%COMP%]{background-color:#f4c606;color:#fff}.save-button[_ngcontent-%COMP%]{background-color:green;color:#fff}.new-book-form[_ngcontent-%COMP%]{width:100%}.form-field[_ngcontent-%COMP%]{width:90%}"]}),X),V=c("IheW"),$=c("I/3d"),G=((H=function(){function t(e,c){_classCallCheck(this,t),this._http=e,this.firestore=c,this.subscriptions=c.collection("subscriptions").valueChanges()}return _createClass(t,[{key:"getArticles",value:function(){return this.subscriptions}},{key:"createArticle",value:function(t){return this.firestore.collection("subscriptions").doc().set({name:t.name,lastname:t.lastname,city:t.city,country:t.country,whatsapp:t.whatsapp,email:t.email,time:t.time}).then((function(){console.log("Document successfully written!")})).catch((function(t){console.error("Error writing document: ",t)})),this.subscriptions=this.firestore.collection("subscriptions").valueChanges(),this.subscriptions}},{key:"updateArticle",value:function(t){return this._http.post(this.apiurl+"articles/update/"+t.id,{id:t.id,price:t.price,description:t.description,jelpi_amount:t.jelpi_amount,company_amount:t.company_amount})}},{key:"deleteArticle",value:function(t){return this.firestore.collection("cities").doc("DC").delete().then((function(){console.log("Document successfully deleted!")})).catch((function(t){console.error("Error removing document: ",t)})),this._http.delete(this.apiurl+"articles/")}}]),t}()).\u0275fac=function(t){return new(t||H)(r.hc(V.a),r.hc($.a))},H.\u0275prov=r.Tb({token:H,factory:H.\u0275fac,providedIn:"root"}),H);function Q(t,e){1&t&&(r.dc(0,"mat-header-cell",22),r.Lc(1," T\xedtulo "),r.cc())}function W(t,e){if(1&t&&(r.dc(0,"mat-cell"),r.dc(1,"span",23),r.Lc(2,"T\xedtulo:"),r.cc(),r.dc(3,"span",24),r.Lc(4),r.cc(),r.cc()),2&t){var c=e.$implicit;r.Kb(4),r.Nc(" ",c.title,"")}}function Z(t,e){1&t&&(r.dc(0,"mat-header-cell",22),r.Lc(1," Descripci\xf3n "),r.cc())}function tt(t,e){if(1&t&&(r.dc(0,"mat-cell"),r.dc(1,"span",23),r.Lc(2,"Descripci\xf3n:"),r.cc(),r.Yb(3,"br"),r.dc(4,"span",25),r.Lc(5),r.cc(),r.cc()),2&t){var c=e.$implicit;r.Kb(5),r.Mc(c.description)}}function et(t,e){1&t&&(r.dc(0,"mat-header-cell",22),r.Lc(1," Url de compra "),r.cc())}function ct(t,e){if(1&t&&(r.dc(0,"mat-cell",26),r.dc(1,"span",23),r.Lc(2,"Url de compra:"),r.cc(),r.Yb(3,"br"),r.dc(4,"span",25),r.Lc(5),r.cc(),r.cc()),2&t){var c=e.$implicit;r.Kb(5),r.Mc(c.buy_url)}}function nt(t,e){1&t&&(r.dc(0,"mat-header-cell",22),r.Lc(1," Imagen "),r.cc())}var ot=function(t){return{"background-color":t}};function at(t,e){if(1&t&&(r.dc(0,"mat-cell",27),r.dc(1,"span",23),r.Lc(2,"Imagen:"),r.cc(),r.Yb(3,"img",28),r.cc()),2&t){var c=e.$implicit;r.uc("ngStyle",r.yc(2,ot,"green"===c.color?"#DCECDD":"#D4D7E4")),r.Kb(3),r.vc("src",c.img,r.Ec)}}function it(t,e){if(1&t){var c=r.ec();r.dc(0,"mat-header-cell",29),r.dc(1,"button",5),r.lc("click",(function(){return r.Dc(c),r.pc().openNewDialog()})),r.dc(2,"mat-icon"),r.Lc(3,"add_circle"),r.cc(),r.cc(),r.cc()}}function lt(t,e){if(1&t){var c=r.ec();r.dc(0,"mat-cell",30),r.dc(1,"button",31),r.lc("click",(function(){r.Dc(c);var t=e.$implicit;return r.pc().openUpdateDialog(t)})),r.dc(2,"mat-icon"),r.Lc(3,"edit"),r.cc(),r.cc(),r.dc(4,"button",32),r.lc("click",(function(){r.Dc(c);var t=e.$implicit;return r.pc().openDeleteDialog(t)})),r.dc(5,"mat-icon"),r.Lc(6,"delete"),r.cc(),r.cc(),r.cc()}}function rt(t,e){1&t&&r.Yb(0,"mat-header-row")}function dt(t,e){1&t&&r.Yb(0,"mat-row")}var st,ut,bt,gt,mt=function(){return[5,10,25,100]},pt=[],ft=((st=function(){function t(e,c,n,o,a,i,l,r,d){_classCallCheck(this,t),this.cd=e,this._route=c,this._router=n,this._bookService=o,this._snackBar=a,this._httpClient=i,this._token=l,this._dialog=r,this.firestore=d,this.snackBarDurationInSeconds=5,this.snackBarHorizontalPosition="right",this.snackBarHerticalPosition="bottom",this.displayedColumns=["title","description","buy_url","img","action"],this.storageRef=m.a.storage().ref("books/"),this.message="",this.error="",this.mobile=!1,this.books=d.collection("books").get(),this.booksCollection=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;360===window.screen.width&&(this.mobile=!0),this.books.subscribe((function(e){e.forEach((function(e){t.booksCollection.push(e.data())})),t.dataSource=new u.k(pt=t.booksCollection),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort}))}},{key:"openNewDialog",value:function(){var t=this,e={id:"",buy_url:"",description:"",img:"",color:"",title:"",timestamp:new Date},c=new File(["foo"],"foo.png",{type:"image/png"});this._dialog.open(N,{width:"550px",data:{newBook:e,newImg:c},disableClose:!0}).afterClosed().subscribe((function(e){null!=e&&t.firestore.collection("books").add(e.newBook).then((function(c){e.newBook.id=c.id;var n=e.newImg.slice(0,e.newImg.size,"image/png");e.newImg=new File([n],e.newBook.id+".png",{type:"image/png"}),t.storageRef.child(e.newImg.name).put(e.newImg).then((function(c){t.storageRef.child(e.newImg.name).getDownloadURL().then((function(c){e.newBook.img=c,t.cd.detectChanges()}))})),pt.unshift(e.newBook),t.dataSource=new u.k(pt),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort,t.showSnackBar("Libro guardado correctamente","success-snackbar",3)})).catch((function(e){t.showSnackBar("Error al guardar el libro.","warning-snackbar",3),console.error("Error writing document: ",e)}))}))}},{key:"openUpdateDialog",value:function(t){var e=this,c=Object.assign({},t);this._dialog.open(R,{width:"550px",data:c,disableClose:!0}).afterClosed().subscribe((function(t){null!=t&&e.firestore.collection("books").doc(t.id).set(t).then((function(){pt=pt.map((function(e){return e.id===t.id?t:e})),e.dataSource=new u.k(pt),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort,e.showSnackBar("Libro guardado correctamente","success-snackbar",3)})).catch((function(t){e.showSnackBar("Error al guardar el libro.","warning-snackbar",3),console.error("Error writing document: ",t)}))}))}},{key:"openDeleteDialog",value:function(t){var e=this,c=Object.assign({},t);this._dialog.open(E,{width:"350px",data:c,disableClose:!0}).afterClosed().subscribe((function(c){null!=c&&e.firestore.collection("books").doc(c.id).delete().then((function(){e.storageRef.child(c.id+".png").delete().then((function(){pt.splice(pt.indexOf(t),1),e.dataSource=new u.k(pt),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort,e.showSnackBar("Libro borrardo correctamente","success-snackbar",3)})).catch((function(t){e.showSnackBar("Error al borrar la imagen del libro","warning-snackbar",3),console.log("Error deleting image from storage",t)}))})).catch((function(t){e.showSnackBar("Error al borrar el libro","warning-snackbar",3),console.log("Error deleting book from firestore",t)}))}))}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"showSnackBar",value:function(t,e,c){this._snackBar.open(t,"Ok",{duration:1e3*c,panelClass:[e],horizontalPosition:this.snackBarHorizontalPosition,verticalPosition:this.snackBarHerticalPosition})}},{key:"sendWhatsapp",value:function(t){window.open("https://api.whatsapp.com/send?phone="+t.countryCode+t.whatsapp,"_blank")}},{key:"sendMail",value:function(t){window.open("https://mail.google.com/mail/?view=cm&fs=1&to="+t.email,"_blank")}}]),t}()).\u0275fac=function(t){return new(t||st)(r.Xb(r.h),r.Xb(i.a),r.Xb(i.c),r.Xb(G),r.Xb(p.b),r.Xb(V.a),r.Xb(V.a),r.Xb(b.b),r.Xb($.a))},st.\u0275cmp=r.Rb({type:st,selectors:[["books-table"]],viewQuery:function(t,e){var c;1&t&&(r.Qc(d.a,!0),r.Qc(s.a,!0)),2&t&&(r.Ac(c=r.mc())&&(e.paginator=c.first),r.Ac(c=r.mc())&&(e.sort=c.first))},decls:33,vars:5,consts:[[1,"search-container","d-flex","justify-content-between"],["matInput","","placeholder","...",3,"keyup"],["searchInput",""],["matSuffix",""],[1,"display-mobile","ml-4"],["mat-mini-fab","","aria-label","hidden","color","danger",1,"new-button",3,"click"],[1,"table-container"],["matSort","",1,"mat-elevation-z8",3,"dataSource","dataSourceChange"],["matColumnDef","title"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","description"],["matColumnDef","buy_url",1,"email-row"],["class","email-row",4,"matCellDef"],["matColumnDef","img",1,"email-row"],["class","email-row",3,"ngStyle",4,"matCellDef"],["matColumnDef","action"],["class","actions-header",4,"matHeaderCellDef"],["class","actions-cell",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],[1,"display-mobile"],[2,"text-align","left"],[2,"text-align","left","max-width","97%"],[1,"email-row"],[1,"email-row",3,"ngStyle"],["alt","",2,"max-height","150px","width","auto","; margin","0 auto",3,"src"],[1,"actions-header"],[1,"actions-cell"],["mat-mini-fab","","aria-label","hidden","color","primary",1,"edit-button",3,"click"],["mat-mini-fab","","aria-label","hidden","color","danger",1,"delete-button",3,"click"]],template:function(t,e){1&t&&(r.dc(0,"div",0),r.dc(1,"div"),r.dc(2,"mat-form-field"),r.dc(3,"mat-label"),r.Lc(4,"Buscar"),r.cc(),r.dc(5,"input",1,2),r.lc("keyup",(function(t){return e.applyFilter(t)})),r.cc(),r.dc(7,"mat-icon",3),r.Lc(8,"search"),r.cc(),r.cc(),r.cc(),r.dc(9,"div",4),r.dc(10,"button",5),r.lc("click",(function(){return e.openNewDialog()})),r.dc(11,"mat-icon"),r.Lc(12,"add_circle"),r.cc(),r.cc(),r.cc(),r.cc(),r.dc(13,"div",6),r.dc(14,"mat-table",7),r.lc("dataSourceChange",(function(t){return e.dataSource=t})),r.bc(15,8),r.Jc(16,Q,2,0,"mat-header-cell",9),r.Jc(17,W,5,1,"mat-cell",10),r.ac(),r.bc(18,11),r.Jc(19,Z,2,0,"mat-header-cell",9),r.Jc(20,tt,6,1,"mat-cell",10),r.ac(),r.bc(21,12),r.Jc(22,et,2,0,"mat-header-cell",9),r.Jc(23,ct,6,1,"mat-cell",13),r.ac(),r.bc(24,14),r.Jc(25,nt,2,0,"mat-header-cell",9),r.Jc(26,at,4,4,"mat-cell",15),r.ac(),r.bc(27,16),r.Jc(28,it,4,0,"mat-header-cell",17),r.Jc(29,lt,7,0,"mat-cell",18),r.ac(),r.Jc(30,rt,1,0,"mat-header-row",19),r.Jc(31,dt,1,0,"mat-row",20),r.cc(),r.Yb(32,"mat-paginator",21),r.cc()),2&t&&(r.Kb(14),r.uc("dataSource",e.dataSource),r.Kb(16),r.uc("matHeaderRowDef",e.displayedColumns),r.Kb(1),r.uc("matRowDefColumns",e.displayedColumns),r.Kb(1),r.uc("pageSizeOptions",r.xc(4,mt)))},directives:[B.c,B.g,o.a,f.a,B.h,n.b,u.j,s.a,u.c,u.e,u.b,u.g,u.i,d.a,u.d,s.b,u.a,a.l,u.f,u.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.display-mobile[_ngcontent-%COMP%]{display:none}mat-header-cell[_ngcontent-%COMP%]{color:#fff;background-color:#263978;text-align:center;font-weight:bolder;font-size:12px}.search-container[_ngcontent-%COMP%]{margin-top:35px;width:250px}.edit-button[_ngcontent-%COMP%]{box-shadow:0 4px 4px #999;background-color:#f4c606}.delete-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;box-shadow:0 4px 4px #999;background-color:red}.new-button[_ngcontent-%COMP%]{margin-left:5px;color:#fff;background-color:green}.actions-cell[_ngcontent-%COMP%], .actions-header[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width:960px){.mat-header-cell[_ngcontent-%COMP%]{font-size:9px}.display-mobile[_ngcontent-%COMP%]{display:block;margin-right:10px;font-weight:bolder}mat-cell[_ngcontent-%COMP%]{text-align:center;margin:0;padding-right:0}mat-cell[_ngcontent-%COMP%]   .display-mobile[_ngcontent-%COMP%]{display:block;margin-right:10px;font-weight:bolder}}@media (min-width:960px){.mat-column-email[_ngcontent-%COMP%]{flex:0 0 28%!important;width:28%!important}.mat-column-country[_ngcontent-%COMP%], .mat-column-email[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-country[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}}  .mat-focused .mat-form-field-label{color:#263978!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:#263978!important}@media screen and (max-width:960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{border:10px solid;clip:rect(0 0 0 0);height:1px;margin:-1px;padding:0;position:absolute;width:1px}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding-left:20px}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.75em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}}"],changeDetection:0}),st),ht=[{path:"",component:(ut=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.mySwiper=new l.a(".swiper-container")}}]),t}(),ut.\u0275fac=function(t){return new(t||ut)},ut.\u0275cmp=r.Rb({type:ut,selectors:[["app-books"]],decls:2,vars:0,consts:[[1,"table-container"]],template:function(t,e){1&t&&(r.dc(0,"div",0),r.Yb(1,"books-table"),r.cc())},directives:[ft],styles:[".table-container[_ngcontent-%COMP%]{margin:0 auto;width:100%}"]}),ut)}],wt=((gt=function t(){_classCallCheck(this,t)}).\u0275mod=r.Vb({type:gt}),gt.\u0275inj=r.Ub({factory:function(t){return new(t||gt)},imports:[[i.f.forChild(ht)],i.f]}),gt),kt=((bt=function t(){_classCallCheck(this,t)}).\u0275mod=r.Vb({type:bt}),bt.\u0275inj=r.Ub({factory:function(t){return new(t||bt)},imports:[[a.c,wt,u.l,B.e,d.b,o.b,s.c,f.b,b.f,g.i,n.c,h.b,x],u.l,B.e,d.b,B.e,d.b,o.b,s.c,f.b,b.f,g.i,x]}),bt)}}]);